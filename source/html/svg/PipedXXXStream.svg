<svg xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" viewBox="0 0 2255 1597" width="2255" xmlns:xlink="http://www.w3.org/1999/xlink" height="1597"><defs/><g transform="translate(5.5,5.5)" id="page1"><rect width="2245" height="1587" x="0" y="0" fill="none"/><g transform="matrix(0.000000,1.000000,-1.000000,0.000000,2174.270000,75.905000)" id="group1"><g id="group2"><path stroke="#191919" stroke-width="1" d="M.0,.0L1062.7,.0L1062.7,1662.1L.0,1662.1L.0,.0z" fill-rule="nonzero" fill="#ffe8cd" id="shape3"/><g transform="matrix(0.000000,-1.000000,1.000000,0.000000,-0.000000,1662.074000)" id="shape4"><path stroke="#191919" stroke-width="1" d="M.0,.0L1662.1,.0L1662.1,56.7L.0,56.7L.0,.0z" fill-rule="nonzero" fill="#ffe8cd"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="775.5" y="34.0">PipedInputStream</tspan></text></g></g><g transform="translate(0.000000,1662.070000)" id="group5"><path stroke="#191919" stroke-width="1" d="M.0,.0L1062.7,.0L1062.7,436.6L.0,436.6L.0,.0z" fill-rule="nonzero" fill="#fedad0" id="shape6"/><g transform="matrix(0.000000,-1.000000,1.000000,0.000000,-0.000000,436.612000)" id="shape7"><path stroke="#191919" stroke-width="1" d="M.0,.0L436.6,.0L436.6,56.7L.0,56.7L.0,.0z" fill-rule="nonzero" fill="#fedad0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="156.8" y="34.0">PipedOutputStream</tspan></text></g></g></g><g transform="translate(198.425000,170.079000)" id="shape8"><path stroke="#39aa71" stroke-width="1" d="M.0,60.0L226.8,60.0L226.8,15.0L211.8,.0L15.0,.0L.0,15.0L.0,60.0z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="16.4" y="35.5">connect(PipedInputStream snk)</tspan></text></g><g transform="translate(198.425000,315.055000)" id="shape9"><path stroke="#39aa71" stroke-width="1" d="M226.8,81.0L226.8,7.0C226.8,3.1,223.6,.0,219.8,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,81.0C.0,84.9,3.1,88.0,7.0,88.0L219.8,88.0C223.6,88.0,226.8,84.9,226.8,81.0z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="80.4" y="21.0">sink = snk;</tspan><tspan style="font-size:10.00pt" x="78.4" y="40.0">snk.in = -1;</tspan><tspan style="font-size:10.00pt" x="76.4" y="59.0">snk.out = 0;</tspan><tspan style="font-size:10.00pt" x="45.9" y="78.0">snk.connected = true;</tspan></text></g><g transform="translate(311.811000,230.079000)" id="shape10"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L.0,79.0" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M3.0,79.0L.0,85.0L-3.0,79.0L3.0,79.0" fill="#39aa71"/><rect width="26.0" height="19.0" x="-12.0" y="32.6" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-12.0" y="47.6">实现</tspan></text></g><g transform="translate(198.425000,461.339000)" id="shape11"><path stroke="#39aa71" stroke-width="1" d="M.0,60.0L226.8,60.0L226.8,15.0L211.8,.0L15.0,.0L.0,15.0L.0,60.0z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="80.4" y="35.5">write(int b)</tspan></text></g><g transform="translate(198.425000,592.315000)" id="shape12"><path stroke="#39aa71" stroke-width="1" d="M226.8,53.0L226.8,7.0C226.8,3.1,223.6,.0,219.8,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,53.0C.0,56.9,3.1,60.0,7.0,60.0L219.8,60.0C223.6,60.0,226.8,56.9,226.8,53.0z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="68.9" y="35.5">sink.receive(b);</tspan></text></g><g transform="translate(311.811000,521.339000)" id="shape13"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L-0.0,65.0" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M3.0,65.0L-0.0,71.0L-3.0,65.0L3.0,65.0" fill="#39aa71"/></g><g transform="translate(755.905000,180.669000)" id="shape14"><path stroke="#39aa71" stroke-width="1" d="M.0,60.0L226.8,60.0L226.8,15.0L211.8,.0L15.0,.0L.0,15.0L.0,60.0z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="73.9" y="35.5">receive(int b)</tspan></text></g><g transform="translate(425.197000,621.579000)" id="shape15"><path stroke="#39aa71" stroke-width="2.6666700839996338" stroke-dasharray="29.3334,13.3334" d="M.0,.0L141.7,.0L141.7,-410.9L320.9,-410.9" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M320.9,-415.8L330.7,-410.9L320.9,-406.0L320.9,-415.8" fill="#39aa71"/><rect width="26.0" height="19.0" x="129.7" y="-319.2" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="129.7" y="-304.2">调用</tspan></text></g><g transform="translate(755.905000,301.850000)" id="shape16"><path stroke="#39aa71" stroke-width="1" d="M226.8,53.0L226.8,7.0C226.8,3.1,223.6,.0,219.8,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,53.0C.0,56.9,3.1,60.0,7.0,60.0L219.8,60.0C223.6,60.0,226.8,56.9,226.8,53.0z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.9" y="35.5">writeSide = Thread.currentThread();</tspan></text></g><g transform="translate(791.700400,396.246000)" id="shape17"><path stroke="#39aa71" stroke-width="1" d="M75.6,60.5L151.2,30.3L75.6,.0L.0,30.3L75.6,60.5z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:宋体,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="44.1" y="35.8">in == out</tspan></text></g><g transform="translate(869.291000,240.669000)" id="shape18"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L.0,55.2" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M3.0,55.2L.0,61.2L-3.0,55.2L3.0,55.2" fill="#39aa71"/></g><g transform="translate(867.589000,361.850000)" id="shape19"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L.0,18.4L-0.3,18.4L-0.3,28.4" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M2.7,28.4L-0.3,34.4L-3.3,28.4L2.7,28.4" fill="#39aa71"/></g><g transform="translate(1029.923700,395.746000)" id="shape20"><path stroke="#39aa71" stroke-width="1" d="M141.7,53.0L141.7,7.0C141.7,3.1,138.6,.0,134.7,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,53.0C.0,56.9,3.1,60.0,7.0,60.0L134.7,60.0C138.6,60.0,141.7,56.9,141.7,53.0z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="30.9" y="35.5">awaitSpace();</tspan></text></g><g transform="translate(942.882000,426.496000)" id="shape21"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L55.0,.0L55.0,-0.8L81.0,-0.8" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M81.0,-3.8L87.0,-0.8L81.0,2.3L81.0,-3.8" fill="#39aa71"/><rect width="25.0" height="19.0" x="24.5" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="24.5" y="5.5">true</tspan></text></g><g transform="translate(791.998500,498.122000)" id="shape22"><path stroke="#39aa71" stroke-width="1" d="M75.6,60.5L151.2,30.3L75.6,.0L.0,30.3L75.6,60.5z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:宋体,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="54.6" y="35.8">in &lt; 0</tspan></text></g><g transform="translate(1104.490000,455.746000)" id="shape23"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L.0,72.6L-155.3,72.6" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M-155.3,75.6L-161.3,72.6L-155.3,69.6L-155.3,75.6" fill="#39aa71"/></g><g transform="translate(867.291000,456.746000)" id="shape24"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L.0,25.4L.3,25.4L.3,35.4" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M3.3,35.4L.3,41.4L-2.7,35.4L3.3,35.4" fill="#39aa71"/><rect width="28.0" height="19.0" x="-13.0" y="10.9" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-13.0" y="25.9">false</tspan></text></g><g transform="translate(590.550700,498.622000)" id="shape25"><path stroke="#39aa71" stroke-width="1" d="M141.7,53.0L141.7,7.0C141.7,3.1,138.6,.0,134.7,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,53.0C.0,56.9,3.1,60.0,7.0,60.0L134.7,60.0C138.6,60.0,141.7,56.9,141.7,53.0z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="50.9" y="26.0">in = 0;</tspan><tspan style="font-size:10.00pt" x="45.9" y="45.0">out = 0;</tspan></text></g><g transform="translate(791.998000,528.372000)" id="shape26"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L-27.7,.0L-27.7,.3L-53.7,.3" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M-53.7,3.3L-59.7,.3L-53.7,-2.8L-53.7,3.3" fill="#39aa71"/><rect width="25.0" height="19.0" x="-41.0" y="-9.3" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-41.0" y="5.8">true</tspan></text></g><g transform="translate(755.203000,654.547000)" id="shape27"><path stroke="#39aa71" stroke-width="1" d="M226.8,53.0L226.8,7.0C226.8,3.1,223.6,.0,219.8,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,53.0C.0,56.9,3.1,60.0,7.0,60.0L219.8,60.0C223.6,60.0,226.8,56.9,226.8,53.0z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="14.9" y="35.5">buffer[in++] = (byte)(b &amp; 0xFF);</tspan></text></g><g transform="translate(661.290000,558.622000)" id="shape28"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L.0,125.9L87.9,125.9" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M87.9,122.9L93.9,125.9L87.9,128.9L87.9,122.9" fill="#39aa71"/></g><g transform="translate(756.203000,784.152000)" id="shape29"><path stroke="#39aa71" stroke-width="1" d="M113.4,62.5L226.8,31.3L113.4,.0L.0,31.3L113.4,62.5z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:宋体,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="46.9" y="36.8">in >= buffer.length</tspan></text></g><g transform="translate(870.717000,714.547000)" id="shape30"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L.0,37.6L-1.1,37.6L-1.1,63.6" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M1.9,63.6L-1.1,69.6L-4.1,63.6L1.9,63.6" fill="#39aa71"/></g><g transform="translate(801.446700,916.256000)" id="shape31"><path stroke="#39aa71" stroke-width="1" d="M141.7,53.0L141.7,7.0C141.7,3.1,138.6,.0,134.7,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,53.0C.0,56.9,3.1,60.0,7.0,60.0L134.7,60.0C138.6,60.0,141.7,56.9,141.7,53.0z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="50.9" y="35.5">in = 0;</tspan></text></g><g transform="translate(871.630000,846.089000)" id="shape32"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L.0,38.2L.7,38.2L.7,64.2" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M3.7,64.2L.7,70.2L-2.3,64.2L3.7,64.2" fill="#39aa71"/><rect width="25.0" height="19.0" x="-11.5" y="26.0" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-11.5" y="41.0">true</tspan></text></g><g transform="translate(1071.650000,924.256000)" id="shape33"><path stroke="#39aa71" stroke-width="1" d="M22.0,44.0L78.0,44.0L78.0,44.0C90.2,44.0,100.0,34.2,100.0,22.0C100.0,9.8,90.2,.0,78.0,.0L22.0,.0L22.0,.0C9.8,.0,.0,9.8,.0,22.0C.0,34.2,9.8,44.0,22.0,44.0z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="24.0" y="27.5">执行完成</tspan></text></g><g transform="translate(982.975000,815.402000)" id="shape34"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L138.7,.0L138.7,102.9" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M141.7,102.9L138.7,108.9L135.7,102.9L141.7,102.9" fill="#39aa71"/><rect width="28.0" height="19.0" x="80.1" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="80.1" y="5.5">false</tspan></text></g><g transform="translate(943.179000,946.256000)" id="shape35"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L122.5,.0" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M122.5,-3.0L128.5,.0L122.5,3.0L122.5,-3.0" fill="#39aa71"/></g><g transform="translate(1918.114000,169.567000)" id="shape36"><path stroke="#191919" stroke-width="1" d="M.0,60.0L226.8,60.0L226.8,15.0L211.8,.0L15.0,.0L.0,15.0L.0,60.0z" fill-rule="nonzero" fill="#7cc2f2"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="95.9" y="35.5">read()</tspan></text></g><g transform="translate(1918.114000,301.850000)" id="shape37"><path stroke="#191919" stroke-width="1" d="M226.8,53.0L226.8,7.0C226.8,3.1,223.6,.0,219.8,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,53.0C.0,56.9,3.1,60.0,7.0,60.0L219.8,60.0C223.6,60.0,226.8,56.9,226.8,53.0z" fill-rule="nonzero" fill="#7cc2f2"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="6.4" y="35.5">readSide = Thread.currentThread();</tspan></text></g><g transform="matrix(0.000000,1.000000,-1.000000,0.000000,1272.746000,202.016000)" id="shape38"><path stroke="#fd8851" stroke-width="1" d="M17.0,143.8L8.1,290.1M.0,.0L34.0,.0L34.0,143.8L.0,143.8L.0,.0z" fill-rule="nonzero" fill="#eb8989"/><path stroke="#fd8851" stroke-width="1" stroke-linecap="round" d="M7.8,294.1C5.6,293.9,3.9,292.0,4.1,289.8C4.2,287.6,6.1,285.9,8.3,286.1C10.5,286.2,12.2,288.1,12.0,290.3C11.9,292.5,10.0,294.2,7.8,294.1" fill="#fd8851"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt" transform="matrix(0.00,-1.00,1.00,0.00,-54.9,88.9)"><tspan style="font-size:10.00pt" x="-23.5" y="77.4">synchronized</tspan></text></g><g transform="matrix(0.000000,1.000000,-1.000000,0.000000,1828.170000,190.567000)" id="shape39"><path stroke="#fd8851" stroke-width="1" d="M17.0,.0L6.4,-89.9M.0,.0L34.0,.0L34.0,143.8L.0,143.8L.0,.0z" fill-rule="nonzero" fill="#eb8989"/><path stroke="#fd8851" stroke-width="1" stroke-linecap="round" d="M6.0,-93.9C8.1,-94.2,10.1,-92.6,10.4,-90.4C10.7,-88.2,9.1,-86.2,6.9,-86.0C4.7,-85.7,2.7,-87.3,2.4,-89.5C2.2,-91.7,3.8,-93.7,6.0,-93.9" fill="#fd8851"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt" transform="matrix(0.00,-1.00,1.00,0.00,-54.9,88.9)"><tspan style="font-size:10.00pt" x="-23.5" y="77.4">synchronized</tspan></text></g><g transform="translate(2031.500000,229.567000)" id="shape40"><path stroke="#0099d2" stroke-width="1" d="M.0,.0L.0,66.3" fill="none"/><path stroke="#0099d2" stroke-width="1" stroke-linecap="round" d="M3.0,66.3L.0,72.3L-3.0,66.3L3.0,66.3" fill="#0099d2"/></g><g transform="translate(1923.865000,474.312000)" id="shape41"><path stroke="#191919" stroke-width="1" d="M.0,60.0L215.3,60.0L215.3,.0L20.0,.0L.0,20.0L.0,60.0z" fill-rule="nonzero" fill="#7cc2f2"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="89.1" y="35.5">in &lt; 0</tspan></text></g><g transform="translate(1658.183500,479.312000)" id="shape42"><path stroke="#39aa71" stroke-width="1" d="M141.7,53.0L141.7,7.0C141.7,3.1,138.6,.0,134.7,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,53.0C.0,56.9,3.1,60.0,7.0,60.0L134.7,60.0C138.6,60.0,141.7,56.9,141.7,53.0z" fill-rule="nonzero" fill="#7cc2f2"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="39.9" y="26.5">notifyAll();</tspan><tspan style="font-size:10.00pt" x="32.4" y="45.5">buffer空了，</tspan></text></g><g transform="translate(1459.838500,474.312000)" id="shape43"><path stroke="#39aa71" stroke-width="1" d="M132.3,63.0L132.3,7.0C132.3,3.1,129.1,.0,125.3,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,63.0C.0,66.9,3.1,70.0,7.0,70.0L125.3,70.0C129.1,70.0,132.3,66.9,132.3,63.0z" fill-rule="nonzero" fill="#7cc2f2"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="32.1" y="21.5">wait(1000);</tspan><tspan style="font-size:10.00pt" x="27.6" y="40.5">buffer空了，</tspan><tspan style="font-size:10.00pt" x="14.1" y="59.5">等待写线程写数据</tspan></text></g><g transform="translate(2031.500000,361.850000)" id="shape44"><path stroke="#0099d2" stroke-width="1" d="M.0,.0L.0,106.5" fill="none"/><path stroke="#0099d2" stroke-width="1" stroke-linecap="round" d="M3.0,106.5L.0,112.5L-3.0,106.5L3.0,106.5" fill="#0099d2"/></g><g transform="translate(1918.114000,601.586000)" id="shape45"><path stroke="#191919" stroke-width="1" d="M226.8,53.0L226.8,7.0C226.8,3.1,223.6,.0,219.8,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,53.0C.0,56.9,3.1,60.0,7.0,60.0L219.8,60.0C223.6,60.0,226.8,56.9,226.8,53.0z" fill-rule="nonzero" fill="#7cc2f2"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="16.9" y="35.5">int ret = buffer[out++] &amp; 0xFF;</tspan></text></g><g transform="translate(2031.500000,534.312000)" id="shape46"><path stroke="#0099d2" stroke-width="1" d="M.0,.0L.0,61.3" fill="none"/><path stroke="#0099d2" stroke-width="1" stroke-linecap="round" d="M3.0,61.3L.0,67.3L-3.0,61.3L3.0,61.3" fill="#0099d2"/></g><g transform="translate(1525.980000,474.312000)" id="shape47"><path stroke="#0099d2" stroke-width="1" d="M.0,.0L.0,-32.0L412.3,-32.0L412.3,-0.5" fill="none"/><path stroke="#0099d2" stroke-width="1" stroke-linecap="round" d="M415.3,-0.5L412.3,5.5L409.3,-0.5L415.3,-0.5" fill="#0099d2"/></g><g transform="translate(1923.870000,509.312000)" id="shape48"><path stroke="#0099d2" stroke-width="1" d="M.0,.0L-117.9,.0" fill="none"/><path stroke="#0099d2" stroke-width="1" stroke-linecap="round" d="M-117.9,3.0L-123.9,.0L-117.9,-3.0L-117.9,3.0" fill="#0099d2"/><rect width="25.0" height="19.0" x="-64.2" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-64.2" y="5.5">true</tspan></text></g><g transform="translate(1658.180000,509.312000)" id="shape49"><path stroke="#0099d2" stroke-width="1" d="M.0,.0L-60.1,.0" fill="none"/><path stroke="#0099d2" stroke-width="1" stroke-linecap="round" d="M-60.1,3.0L-66.1,.0L-60.1,-3.0L-60.1,3.0" fill="#0099d2"/></g><g transform="translate(1247.245000,479.312000)" id="shape50"><path stroke="#39aa71" stroke-width="1" d="M.0,60.0L160.6,60.0L160.6,15.0L145.6,.0L15.0,.0L.0,15.0L.0,60.0z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="40.3" y="35.5">awaitSpace();</tspan></text></g><g transform="translate(1171.660000,424.918000)" id="shape51"><path stroke="#39aa71" stroke-width="2.6666700839996338" stroke-dasharray="29.3334,13.3334" d="M.0,.0L155.9,.0L155.9,44.6" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M160.8,44.6L155.9,54.4L151.0,44.6L160.8,44.6" fill="#39aa71"/><rect width="26.0" height="19.0" x="70.7" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="70.7" y="5.5">调用</tspan></text></g><g transform="translate(1254.399500,601.586000)" id="shape52"><path stroke="#39aa71" stroke-width="1" d="M.0,60.0L151.2,60.0L151.2,.0L20.0,.0L.0,20.0L.0,60.0z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="45.6" y="35.5">in == out</tspan></text></g><g transform="translate(1327.560000,539.312000)" id="shape53"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L.0,30.3L-0.0,30.3L-0.0,56.3" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M3.0,56.3L-0.0,62.3L-3.0,56.3L3.0,56.3" fill="#39aa71"/></g><g transform="translate(1455.113500,596.586000)" id="shape54"><path stroke="#39aa71" stroke-width="1" d="M141.7,63.0L141.7,7.0C141.7,3.1,138.6,.0,134.7,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,63.0C.0,66.9,3.1,70.0,7.0,70.0L134.7,70.0C138.6,70.0,141.7,66.9,141.7,63.0z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="39.9" y="21.5">notifyAll();</tspan><tspan style="font-size:10.00pt" x="32.4" y="40.5">buffer满了，</tspan><tspan style="font-size:10.00pt" x="25.4" y="59.5">通知读线程读取</tspan></text></g><g transform="translate(1658.183500,596.586000)" id="shape55"><path stroke="#39aa71" stroke-width="1" d="M141.7,63.0L141.7,7.0C141.7,3.1,138.6,.0,134.7,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,63.0C.0,66.9,3.1,70.0,7.0,70.0L134.7,70.0C138.6,70.0,141.7,66.9,141.7,63.0z" fill-rule="nonzero" fill="#b0ddc1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="36.9" y="21.5">wait(1000);</tspan><tspan style="font-size:10.00pt" x="32.4" y="40.5">buffer满了，</tspan><tspan style="font-size:10.00pt" x="25.4" y="59.5">等待读线程读取</tspan></text></g><g transform="translate(1405.580000,631.586000)" id="shape56"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L43.5,.0" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M43.5,-3.0L49.5,.0L43.5,3.0L43.5,-3.0" fill="#39aa71"/></g><g transform="translate(1596.850000,631.586000)" id="shape57"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L55.3,.0" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M55.3,-3.0L61.3,.0L55.3,3.0L55.3,-3.0" fill="#39aa71"/></g><g transform="translate(1729.050000,539.312000)" id="shape58"><path stroke="#0099d2" stroke-width="3" stroke-dasharray="33,15,7.5,15" d="M.0,.0L.0,46.9" fill="none"/><path stroke="#0099d2" stroke-width="1" stroke-linecap="round" d="M5.2,46.9L.0,57.3L-5.2,46.9L5.2,46.9" fill="#0099d2"/><rect width="52.0" height="19.0" x="-25.0" y="13.1" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-25.0" y="28.1">异步通知</tspan></text></g><g transform="translate(1525.980000,596.586000)" id="shape59"><path stroke="#39aa71" stroke-width="3" stroke-dasharray="33,15,7.5,15" d="M.0,.0L.0,-41.9" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M-5.2,-41.9L.0,-52.3L5.2,-41.9L-5.2,-41.9" fill="#39aa71"/><rect width="52.0" height="19.0" x="-25.0" y="-32.1" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-25.0" y="-17.1">异步通知</tspan></text></g><g transform="translate(1943.113700,733.028000)" id="shape60"><path stroke="#191919" stroke-width="1" d="M95.0,60.2L170.2,33.6C173.8,32.3,173.8,30.2,170.2,28.9L95.0,2.3C91.3,1.0,85.4,1.0,81.8,2.3L6.6,28.9C3.0,30.2,3.0,32.3,6.6,33.6L81.8,60.2C85.4,61.5,91.3,61.5,95.0,60.2z" fill-rule="nonzero" fill="#7cc2f2"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="65.9" y="27.3">out >= </tspan><tspan style="font-size:10.00pt" x="48.4" y="46.3">buffer.length</tspan></text></g><g transform="translate(1658.183500,743.446300)" id="shape61"><path stroke="#39aa71" stroke-width="1" d="M141.7,34.7L141.7,7.0C141.7,3.1,138.6,.0,134.7,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,34.7C.0,38.5,3.1,41.7,7.0,41.7L134.7,41.7C138.6,41.7,141.7,38.5,141.7,34.7z" fill-rule="nonzero" fill="#7cc2f2"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="45.9" y="26.5">out = 0;</tspan></text></g><g transform="translate(1943.110000,764.278000)" id="shape62"><path stroke="#0099d2" stroke-width="1" d="M.0,.0L-137.2,.0" fill="none"/><path stroke="#0099d2" stroke-width="1" stroke-linecap="round" d="M-137.2,3.0L-143.2,.0L-137.2,-3.0L-137.2,3.0" fill="#0099d2"/><rect width="25.0" height="19.0" x="-97.5" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-97.5" y="5.5">true</tspan></text></g><g transform="translate(1658.183500,860.984000)" id="shape63"><path stroke="#191919" stroke-width="1" d="M77.3,59.7L135.3,34.1C138.9,32.5,138.9,30.0,135.3,28.4L77.3,2.8C73.7,1.3,68.0,1.3,64.5,2.8L6.4,28.4C2.9,30.0,2.9,32.5,6.4,34.1L64.5,59.7C68.0,61.2,73.7,61.2,77.3,59.7z" fill-rule="nonzero" fill="#7cc2f2"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="40.9" y="36.8">in == out</tspan></text></g><g transform="translate(2031.500000,661.586000)" id="shape64"><path stroke="#0099d2" stroke-width="1" d="M.0,.0L.0,65.4" fill="none"/><path stroke="#0099d2" stroke-width="1" stroke-linecap="round" d="M3.0,65.4L.0,71.4L-3.0,65.4L3.0,65.4" fill="#0099d2"/></g><g transform="translate(2031.500000,795.528000)" id="shape65"><path stroke="#0099d2" stroke-width="1" d="M.0,.0L.0,96.7L-225.6,96.7" fill="none"/><path stroke="#0099d2" stroke-width="1" stroke-linecap="round" d="M-225.6,99.7L-231.6,96.7L-225.6,93.7L-225.6,99.7" fill="#0099d2"/></g><g transform="translate(1459.843500,871.402300)" id="shape66"><path stroke="#39aa71" stroke-width="1" d="M141.7,34.7L141.7,7.0C141.7,3.1,138.6,.0,134.7,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,34.7C.0,38.5,3.1,41.7,7.0,41.7L134.7,41.7C138.6,41.7,141.7,38.5,141.7,34.7z" fill-rule="nonzero" fill="#7cc2f2"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="47.9" y="26.5">in = -1;</tspan></text></g><g transform="translate(1658.180000,892.234000)" id="shape67"><path stroke="#0099d2" stroke-width="1" d="M.0,.0L-50.6,.0" fill="none"/><path stroke="#0099d2" stroke-width="1" stroke-linecap="round" d="M-50.6,3.0L-56.6,.0L-50.6,-3.0L-50.6,3.0" fill="#0099d2"/><rect width="25.0" height="19.0" x="-35.5" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-35.5" y="5.5">true</tspan></text></g><g transform="translate(1651.786000,999.360000)" id="shape68"><path stroke="#191919" stroke-width="1" d="M22.0,44.0L132.5,44.0C144.7,44.0,154.5,34.2,154.5,22.0C154.5,9.8,144.7,.0,132.5,.0L22.0,.0C22.0,.0,22.0,.0,22.0,.0C9.8,.0,.0,9.8,.0,22.0C.0,34.2,9.8,44.0,22.0,44.0z" fill-rule="nonzero" fill="#7cc2f2"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="55.8" y="27.5">返回ret</tspan></text></g><g transform="translate(1729.050000,923.484000)" id="shape69"><path stroke="#0099d2" stroke-width="1" d="M.0,.0L-0.0,69.9" fill="none"/><path stroke="#0099d2" stroke-width="1" stroke-linecap="round" d="M3.0,69.9L-0.0,75.9L-3.0,69.9L3.0,69.9" fill="#0099d2"/></g><g transform="translate(1736.330000,666.586000)" id="shape70"><path stroke="#39aa71" stroke-width="1" d="M.0,.0L.0,32.0L-406.3,32.0L-406.3,1.0" fill="none"/><path stroke="#39aa71" stroke-width="1" stroke-linecap="round" d="M-409.3,1.0L-406.3,-5.0L-403.3,1.0L-409.3,1.0" fill="#39aa71"/></g><g transform="translate(867.589000,558.622000)" id="shape71"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,63.9L1.0,63.9L1.0,89.9" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M4.0,89.9L1.0,95.9L-2.0,89.9L4.0,89.9" fill="#191919"/><rect width="28.0" height="19.0" x="-13.0" y="26.8" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-13.0" y="41.8">false</tspan></text></g><g transform="translate(1729.050000,785.109000)" id="shape72"><path stroke="#0099d2" stroke-width="1" d="M.0,.0L.0,69.9" fill="none"/><path stroke="#0099d2" stroke-width="1" stroke-linecap="round" d="M3.0,69.9L.0,75.9L-3.0,69.9L3.0,69.9" fill="#0099d2"/></g><g transform="translate(113.386000,1313.385600)" id="shape73"><path stroke="#191919" stroke-width="1" d="M264.6,32.4L264.6,7.0C264.6,3.1,261.4,.0,257.6,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,32.4C.0,36.3,3.1,39.4,7.0,39.4L257.6,39.4C261.4,39.4,264.6,36.3,264.6,32.4z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="63.8" y="25.5">PipedOutputStream-1</tspan></text></g><g transform="translate(113.386000,1379.525600)" id="shape74"><path stroke="#191919" stroke-width="1" d="M264.6,32.4L264.6,7.0C264.6,3.1,261.4,.0,257.6,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,32.4C.0,36.3,3.1,39.4,7.0,39.4L257.6,39.4C261.4,39.4,264.6,36.3,264.6,32.4z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="63.8" y="25.5">PipedOutputStream-2</tspan></text></g><g transform="translate(113.386000,1445.665600)" id="shape75"><path stroke="#191919" stroke-width="1" d="M264.6,32.4L264.6,7.0C264.6,3.1,261.4,.0,257.6,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,32.4C.0,36.3,3.1,39.4,7.0,39.4L257.6,39.4C261.4,39.4,264.6,36.3,264.6,32.4z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="63.8" y="25.5">PipedOutputStream-3</tspan></text></g><g transform="translate(538.583000,1379.525600)" id="shape76"><path stroke="#191919" stroke-width="1" d="M264.6,32.4L264.6,7.0C264.6,3.1,261.4,.0,257.6,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,32.4C.0,36.3,3.1,39.4,7.0,39.4L257.6,39.4C261.4,39.4,264.6,36.3,264.6,32.4z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="76.8" y="25.5">PipedInputStream</tspan></text></g><g transform="translate(377.953000,1333.110000)" id="shape77"><path stroke="#191919" stroke-width="1" d="M.0,.0L292.9,.0L292.9,40.4" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M295.9,40.4L292.9,46.4L289.9,40.4L295.9,40.4" fill="#191919"/><rect width="86.0" height="19.0" x="88.5" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="88.5" y="5.5">Thread-1 写入</tspan></text></g><g transform="translate(377.953000,1399.250000)" id="shape78"><path stroke="#191919" stroke-width="1" d="M.0,.0L154.6,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M154.6,-3.0L160.6,.0L154.6,3.0L154.6,-3.0" fill="#191919"/><rect width="86.0" height="19.0" x="39.7" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="39.7" y="5.5">Thread-2 写入</tspan></text></g><g transform="translate(377.953000,1465.390000)" id="shape79"><path stroke="#191919" stroke-width="1" d="M.0,.0L292.9,.0L292.9,-40.4" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M289.9,-40.4L292.9,-46.4L295.9,-40.4L289.9,-40.4" fill="#191919"/><rect width="86.0" height="19.0" x="101.3" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="101.3" y="5.5">Thread-3 写入</tspan></text></g><g transform="translate(844.394000,1313.385000)" id="shape80"><path stroke="#303030" stroke-width="1" d="M.0,.0L2.4,.0C5.0,-0.4,7.7,.5,9.6,2.4C11.5,4.3,12.4,7.0,12.0,9.6L12.0,70.7C11.6,73.4,12.5,76.0,14.4,77.9C16.3,79.8,19.0,80.7,21.6,80.3C19.0,79.9,16.3,80.8,14.4,82.7C12.5,84.6,11.6,87.3,12.0,89.9L12.0,151.0C12.4,153.7,11.5,156.3,9.6,158.2C7.7,160.1,5.0,161.0,2.4,160.6L.0,160.6" fill="none"/><text xml:space="preserve" style="fill:#000000;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="35.6" y="85.8">多个输出流可以在多线程环境下往同一个输入流里面写入数据</tspan></text></g><g transform="translate(1400.500000,1263.000000)" id="table81"><g><path stroke="#a0a0a4" stroke-width="1" d="M.0,.0L142.7,.0L142.7,40.0L.0,40.0L.0,.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="9.0" y="25.5">类</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M142.7,.0L281.8,.0L281.8,40.0L142.7,40.0L142.7,.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="151.7" y="25.5">属性</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M281.8,.0L768.8,.0L768.8,40.0L281.8,40.0L281.8,.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"/></g><g><path stroke="#a0a0a4" stroke-width="1" d="M.0,40.0L142.7,40.0L142.7,278.0L.0,278.0L.0,40.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:宋体,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="9.0" y="164.5">PipedInputStream</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M142.7,40.0L281.8,40.0L281.8,80.0L142.7,80.0L142.7,40.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="151.7" y="65.5">Thread readSide</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M281.8,40.0L768.8,40.0L768.8,80.0L281.8,80.0L281.8,40.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="290.8" y="65.5">读线程</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M142.7,80.0L281.8,80.0L281.8,120.0L142.7,120.0L142.7,80.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="151.7" y="105.5">Thread writeSide</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M281.8,80.0L768.8,80.0L768.8,120.0L281.8,120.0L281.8,80.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="290.8" y="105.5">写线程</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M142.7,120.0L281.8,120.0L281.8,170.0L142.7,170.0L142.7,120.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="151.7" y="150.5">byte buffer[]</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M281.8,120.0L768.8,120.0L768.8,170.0L281.8,170.0L281.8,120.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="290.8" y="141.0">缓冲数据的环形数组，默认大小 1024</tspan><tspan style="font-size:10.00pt" x="290.8" y="160.0">PipedInputStream接收到PipedOutputStream的数据缓存在这里</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M142.7,170.0L281.8,170.0L281.8,238.0L142.7,238.0L142.7,170.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="151.7" y="209.5">int in = -1</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M281.8,170.0L768.8,170.0L768.8,238.0L281.8,238.0L281.8,170.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="290.8" y="190.5">buffer 里的写索引，用于表示环形数组里数据写到哪个位置了</tspan><tspan style="font-size:10.00pt" x="290.8" y="209.5">in &lt; 0 表示buffer是空的</tspan><tspan style="font-size:10.00pt" x="290.8" y="228.5">in == out 表示 buffer满了</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M142.7,238.0L281.8,238.0L281.8,278.0L142.7,278.0L142.7,238.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="151.7" y="263.5">int out = 0</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M281.8,238.0L768.8,238.0L768.8,278.0L281.8,278.0L281.8,238.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="290.8" y="263.5">buffer里的读索引，用于表述数据读取到哪个位置了</tspan></text></g></g><g transform="matrix(0.000000,1.000000,-1.000000,0.000000,1301.266000,304.053000)" id="shape82"><path stroke="#fd8851" stroke-width="1" d="M35.0,143.8L91.7,200.5M.0,.0L70.0,.0L70.0,143.8L.0,143.8L.0,.0z" fill-rule="nonzero" fill="#cacaca"/><path stroke="#fd8851" stroke-width="1" stroke-linecap="round" d="M94.5,203.3C93.0,204.9,90.4,204.9,88.9,203.3C87.3,201.7,87.3,199.2,88.9,197.7C90.4,196.1,93.0,196.1,94.5,197.7C96.1,199.2,96.1,201.7,94.5,203.3" fill="#fd8851"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt" transform="matrix(0.00,-1.00,1.00,0.00,-36.9,106.9)"><tspan style="font-size:10.00pt" x="-23.0" y="58.4">buffer满了，写线程</tspan><tspan style="font-size:10.00pt" x="-23.0" y="77.4">循环wait，等待读线</tspan><tspan style="font-size:10.00pt" x="10.5" y="96.4">程notify</tspan></text></g><g transform="matrix(0.000000,1.000000,-1.000000,0.000000,748.510000,370.850000)" id="shape83"><path stroke="#fd8851" stroke-width="1" d="M26.0,143.8L127.8,143.8M.0,.0L52.0,.0L52.0,143.8L.0,143.8L.0,.0z" fill-rule="nonzero" fill="#cacaca"/><path stroke="#fd8851" stroke-width="1" stroke-linecap="round" d="M131.8,143.8C131.8,146.0,130.0,147.8,127.8,147.8C125.6,147.8,123.8,146.0,123.8,143.8C123.8,141.6,125.6,139.8,127.8,139.8C130.0,139.8,131.8,141.6,131.8,143.8" fill="#fd8851"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt" transform="matrix(0.00,-1.00,1.00,0.00,-45.9,97.9)"><tspan style="font-size:10.00pt" x="-32.0" y="67.9">buffer为空，重置读</tspan><tspan style="font-size:10.00pt" x="6.5" y="86.9">写索引</tspan></text></g><g transform="matrix(0.000000,1.000000,-1.000000,0.000000,699.233000,862.189000)" id="shape84"><path stroke="#fd8851" stroke-width="1" d="M26.0,.0L84.1,-102.2M.0,.0L52.0,.0L52.0,143.8L.0,143.8L.0,.0z" fill-rule="nonzero" fill="#cacaca"/><path stroke="#fd8851" stroke-width="1" stroke-linecap="round" d="M86.0,-105.7C88.0,-104.6,88.6,-102.2,87.5,-100.2C86.5,-98.3,84.0,-97.6,82.1,-98.7C80.2,-99.8,79.5,-102.3,80.6,-104.2C81.7,-106.1,84.1,-106.8,86.0,-105.7" fill="#fd8851"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt" transform="matrix(0.00,-1.00,1.00,0.00,-45.9,97.9)"><tspan style="font-size:10.00pt" x="-32.0" y="67.9">buffer写到数组尾，</tspan><tspan style="font-size:10.00pt" x="-26.0" y="86.9">重置写索引到开头</tspan></text></g><g transform="matrix(0.000000,1.000000,-1.000000,0.000000,1608.300000,719.675000)" id="shape85"><path stroke="#fd8851" stroke-width="1" d="M26.0,.0L44.6,-49.9M.0,.0L52.0,.0L52.0,143.8L.0,143.8L.0,.0z" fill-rule="nonzero" fill="#cacaca"/><path stroke="#fd8851" stroke-width="1" stroke-linecap="round" d="M46.0,-53.6C48.1,-52.9,49.1,-50.6,48.4,-48.5C47.6,-46.4,45.3,-45.4,43.2,-46.1C41.1,-46.9,40.1,-49.2,40.9,-51.3C41.6,-53.4,43.9,-54.4,46.0,-53.6" fill="#fd8851"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt" transform="matrix(0.00,-1.00,1.00,0.00,-45.9,97.9)"><tspan style="font-size:10.00pt" x="-25.5" y="58.4">buffer读到数组末</tspan><tspan style="font-size:10.00pt" x="-32.5" y="77.4">尾，重置索引从头开</tspan><tspan style="font-size:10.00pt" x="13.0" y="96.4">始读</tspan></text></g><g transform="matrix(0.000000,1.000000,-1.000000,0.000000,1417.320000,812.385000)" id="shape86"><path stroke="#fd8851" stroke-width="1" d="M17.0,.0L59.0,-113.4M.0,.0L34.0,.0L34.0,143.8L.0,143.8L.0,.0z" fill-rule="nonzero" fill="#cacaca"/><path stroke="#fd8851" stroke-width="1" stroke-linecap="round" d="M60.4,-117.1C62.5,-116.4,63.5,-114.1,62.8,-112.0C62.0,-109.9,59.7,-108.9,57.6,-109.6C55.6,-110.4,54.5,-112.7,55.3,-114.8C56.0,-116.8,58.3,-117.9,60.4,-117.1" fill="#fd8851"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt" transform="matrix(0.00,-1.00,1.00,0.00,-54.9,88.9)"><tspan style="font-size:10.00pt" x="-30.0" y="77.4">如果out为0，则</tspan></text></g></g></svg>
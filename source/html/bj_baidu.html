<!DOCTYPE html> 
<html>
<head> 
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<title>北京旅游景点</title> 
<style type="text/css"> 
html{height:100%} 
body{height:100%;margin:0px;padding:0px} 
#container{height:100%} 
</style> 
<script type="text/javascript" src="https://api.map.baidu.com/api?v=1.0&type=webgl&ak=GZQT8L85QtZfRfSYEoW82abcNiaGjKmw">
</script>
</head> 
  
<body>
    <div id="selectors">
        <input id="bowuguan" class="inputCheckBox" type="checkbox" checked="checked">博物馆</input>
        <input id="jingdian" class="inputCheckBox" type="checkbox" checked="checked">景点</input>
        <input id="ertong" class="inputCheckBox" type="checkbox" checked="checked">儿童</input>
        <input id="jucahng" class="inputCheckBox" type="checkbox" >剧场</input>
        <input id="simiao" class="inputCheckBox" type="checkbox" >寺庙</input>
        <input id="shangchang" class="inputCheckBox" type="checkbox" >商场</input>
        <input type="text" id="start" placeholder="起点">
        <input type="text" id="end" placeholder="终点">
        <button onclick="searchTransit()">公交</button>
        <button onclick="searchDriving()">自驾</button>
        <br/><br/>
    </div> 
    <div id="container"></div>
    <div id="panel" style="width: 100%; height: 200px; overflow: auto;"></div>

<script type="text/javascript">

    const map = new BMapGL.Map("container");

    // 创建地图实例 
    const point = new BMapGL.Point(116.404, 39.915);
    // 创建点坐标 
    map.centerAndZoom(point, 15);
    // 初始化地图，设置中心点坐标和地图级别 

    map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放
    const scaleCtrl = new BMapGL.ScaleControl();  // 添加比例尺控件
    map.addControl(scaleCtrl);
    const zoomCtrl = new BMapGL.ZoomControl();  // 添加缩放控件
    map.addControl(zoomCtrl);
    
    // https://api.map.baidu.com/lbsapi/getpoint/index.html

    var bowuguanData = [
            {x: 116.403757, y: 39.916727, title: '故宫'},
            {x: 116.348486, y: 39.911876, title: '首都博物馆'},
            {x: 116.403757, y: 39.916727, title: '国家博物馆'},
            {x: 116.406116, y: 39.889525, title: '自然博物馆'},
            {x: 116.341009, y: 39.943129, title: '古动物馆'},
            {x: 116.389218, y: 40.009379, title: '国家动物博物馆'},
            {x: 116.139442, y: 40.168155, title: '坦克博物馆'},
            {x: 116.614423, y: 40.055113 , title: '西湖园'},
            {x: 116.54427, y: 40.024063,  title: '民航博物馆'},
            {x: 116.372885, y: 40.192095, title: '中国航空航天博物馆'},
            {x: 116.357315, y: 39.987388, title: '北京航空航天博物馆'},
            {x: 116.429985, y: 39.810981, title: '中国航天博物馆'},
            {x: 116.330207, y: 39.914976, title: '革命军事博物馆'}, 
            {x: 116.375341, y: 39.914214, title: '民族文化宫'},
            {x: 116.527178, y: 40.002671, title: '电影博物馆'},
            {x: 116.365278, y: 39.931588, title: '鲁迅博物馆'},
            {x: 116.417259, y: 39.930527, title: '美术馆'},
            {x: 116.404125, y: 40.009944, title: '工艺美术馆'},
            {x: 116.404162, y: 39.908892, title: '毛主席纪念堂'},
            {x: 116.726914, y: 39.967915, title: '体育博物馆'},
            {x: 116.377722, y: 39.928967, title: '地质博物馆'},
            {x: 116.469233, y: 39.946976, title: '农业博物馆'},
            {x: 116.232474, y: 39.857753, title: '人民抗日战争纪念馆'},
            {x: 116.22742, y: 39.856445,  title: '卢沟桥历史博物馆'},
            {x: 116.343134, y: 39.94404,  title: '天文馆'},
            {x: 116.344611, y: 39.974916, title: '古钟博物馆'},
            {x: 116.565726, y: 39.909385, title: '北京艺术博物馆'},
            {x: 116.400119, y: 39.884358, title: '古代建筑博物馆'},
            {x: 116.41515, y: 40.002016,  title: '炎黄艺术馆'},
            {x: 116.255634, y: 40.306283, title: '明十三陵'},
            {x: 116.440066, y: 39.912603, title: '古观象台'},
            {x: 116.401377, y: 39.908484, title: '钱币博物馆'},
            {x: 115.94351, y: 39.693463,  title: '西周燕都博物馆'},
            {x: 116.365499, y: 39.868291, title: '辽金城垣博物馆'},
            {x: 116.303623, y: 39.812871, title: '西汉墓博物馆'},
            {x: 116.312399, y: 40.001644, title: '赛克勒考古博物馆'},
            {x: 116.876273, y: 40.24019,  title: '地道战纪念馆'},
            {x: 116.324769, y: 39.954873, title: '民族博物馆'},
            {x: 116.337993, y: 39.748714, title: '印刷博物馆'},
            {x: 116.318473, y: 40.019756, title: '圆明园展览馆'},
            {x: 116.397809, y: 39.989379, title: '中华民族博物院'},
            {x: 116.540397, y: 40.013309, title: '观复博物馆'},
            {x: 116.212632, y: 40.012586, title: '蜜蜂博物馆'},
            {x: 116.433211, y: 39.976518, title: '中医药博物馆'},
            {x: 116.467464, y: 39.782489, title: '麋鹿苑博物馆'},
            {x: 116.406763, y: 39.906222, title: '铁道博物馆'},
            {x: 116.522415, y: 40.003628, title: '铁道博物馆(东郊)'},
            {x: 116.32553, y: 39.982485,  title: '海淀区博物馆'},
            {x: 116.684891, y: 40.305098, title: '老爷车博物馆'},
            {x: 116.437639, y: 39.916824, title: '邮政邮票博物馆'},
            {x: 116.320303, y: 39.975885, title: '人民大学博物馆'},
            {x: 116.30852, y: 39.835739,  title: '汽车博物馆'},
            {x: 116.417686, y: 39.904087,  title: '中央礼品文物管理中心'},
            {x: 116.500948, y: 39.990224,  title: '遇见博物馆'},
            {x: 116.405433, y: 40.005392,  title: '考古博物馆'},
            {x: 115.881, y: 39.590627,  title: '世界地质公园博物馆'},
            {x: 116.310589, y: 39.896336,  title: '公交馆'},
            {x: 116.43929, y: 39.913052,  title: '海关博物馆'},
            {x: 116.183773, y: 39.885338,  title: '园林博物馆'},
            {x: 116.394428, y: 39.840734,  title: '消防博物馆'},
            {x: 116.411365, y: 39.908361,  title: '北京警察博物馆'},
            {x: 116.532483, y: 39.916972 ,  title: '中国紫檀博物馆'},
            {x: 116.54724, y: 39.904722,  title: '科举匾额博物馆'},
            {x: 116.40774, y: 39.906237,  title: '北京市规划展览馆'},
            {x: 116.417323, y: 39.905156,  title: '中国第一历史档案馆'},
        ]

        var jingdianData = [
            {x: 116.419342, y: 39.888663, title: '天坛'},
            {x: 116.400824, y: 39.997574, title: '鸟巢'},
            {x: 116.419654, y: 39.953183, title: '国子监'},
            {x: 116.423632, y: 39.953638, title: '雍和宫'},
            {x: 116.404153, y: 39.933751, title: '景山'},
            {x: 116.315938, y: 40.005466, title: '圆明园'},
            {x: 116.291621, y: 40.004603, title: '颐和园'},
            {x: 116.395376, y: 39.932886, title: '北海公园'},
            {x: 116.392791, y: 39.941922, title: '恭王府'},
            {x: 116.197194, y: 39.881733, title: '园博园'},
            {x: 116.502072, y: 39.991088, title: '798艺术区 '},
            {x: 117.284632, y: 40.661046, title: '古北水镇'},
            {x: 116.759092, y: 40.633408, title: '清凉谷'},
            {x: 117.310896, y: 40.187348, title: '金海湖'},
            {x: 116.689259, y: 40.467871, title: '青龙峡'},
            {x: 116.690837, y: 40.403587, title: '雁栖湖'},
            {x: 116.16884, y: 39.941638, title: '模式口大街'},
            {x: 116.190196, y: 39.968527, title: '八大处公园'},
            {x: 116.385158, y: 39.931202, title: '西什库教堂'},
            {x: 116.385158, y: 39.931202, title: '西什库教堂'},
            {x: 116.373959, y: 39.930766, title: '历代帝王庙'},
            {x: 116.313245, y: 39.925001, title: '中央电视塔'},
            {x: 116.177067, y: 39.911562, title: '首钢园'},
            {x: 116.404696, y: 39.903756,  title: '杜莎夫人蜡像馆'},
            {x: 115.909891, y: 39.804613,  title: '银狐洞'},
            {x: 115.909891, y: 39.804613,  title: '银狐洞'},
            {x: 116.036219, y: 39.900848,  title: '八奇洞'},
            {x: 115.567102, y: 40.028529,  title: '龙门涧'},
            {x: 115.966271, y: 40.061668,  title: '神泉峡'},
            {x: 116.161191, y: 39.74004,  title: '昊天公园'},
            {x: 116.362735, y: 39.87721,  title: '大观园'},
            {x: 116.157834, y: 39.91414,  title: '冬奥公园'},
            {x: 116.731526, y: 39.879708,  title: '绿心公园'},
            {x: 116.753794, y: 39.875816,  title: '大运河森林公园'},
        ]

        var ertongData = [
            {x: 116.399085, y: 39.97747, title: '北京科学中心'},
            {x: 116.34482, y: 39.946348, title: '动物园'},
            {x: 116.32865, y: 39.505009, title: '大兴野生动物园'},
            {x: 116.40504, y: 40.012384, title: '中国科学技术馆'},
            {x: 116.325721, y: 39.918496, title: '宋庆龄科学技术馆'},
            {x: 116.312678, y: 39.924803, title: '太平洋海底世界'},
            {x: 116.294039, y: 39.816781, title: '世界公园'},
            {x: 116.215518, y: 39.917811, title: '石景山游乐园'},
            {x: 116.500997, y: 39.873927, title: '欢乐谷'},
            {x: 116.68782, y: 39.86099, title: '环球度假区'},
            {x: 116.330065, y: 39.949641, title: '国家图书馆'},
            {x: 116.469182, y: 39.875885, title: '首都图书馆'},
            {x: 116.450539, y: 39.932873, title: '法国文化中心'},
            {x: 116.407571, y: 39.974156, title: '朝阳区少儿图书馆'},
            {x: 116.197868, y: 39.917206, title: '石景山儿童图书馆'},
            {x: 116.168305, y: 39.944034, title: '第四纪冰川遗迹陈列馆'},
            {x: 117.072789, y: 40.503935, title: '蜜蜂大世界'},
            {x: 117.09841, y: 40.521656 , title: '欢乐松鼠谷'},
            {x: 116.708914, y: 40.300749, title: '鹿世界主题园'},
            {x: 116.803181, y: 40.18296 , title: '七彩蝶园'},
            {x: 116.513617, y: 39.943052, title: '蜜糖国'},
            {x: 116.283096, y: 39.918294, title: 'MELAND'},
            {x: 116.197707, y: 39.763601, title: '广阳恐龙寻宝乐园'},
            {x: 116.205892, y: 39.919167, title: '石景山区科技馆'},
            {x: 116.16073, y: 39.801749, title: '五洲植物乐园'},
            {x: 116.453462, y: 39.934256, title: '富国海底世界'},
            {x: 116.305101, y: 39.830975, title: '探洞工场(万达广场丰科店)'},
            {x: 116.488083, y: 39.945595, title: '勇敢者乐园'},
            {x: 116.547737, y: 39.881757, title: '熊猫亲子乐园'},
            {x: 116.236735, y: 39.942853, title: '赶海+航空'},
            {x: 116.255328, y: 39.890163, title: '欢乐水魔方'},
        ]
        
        var shangchangData = [
            {x: 116.603045, y: 40.016812, title: '斯普瑞斯奥特莱斯'},
            {x: 116.49428, y: 39.883897, title: '燕莎奥特莱斯购物中心'},
            {x: 116.512258, y: 40.041838, title: '北京赛特奥莱'},
            {x: 116.176188, y: 40.240957, title: '八达岭奥特莱斯'},
            {x: 116.331261, y: 39.833241, title: '花乡奥莱村'},
            {x: 116.194065, y: 39.769172, title: '首创奥特莱斯'},
        ]
        
        var juchangData = [
            {x: 116.379436, y: 39.954111, title: '解放军歌剧院'},
            {x: 116.46857, y: 39.89774, title: '北京歌舞剧院'},
            {x: 116.44315, y: 39.935238, title: '中央歌剧院'},
            {x: 116.434396, y: 39.864886, title: '中国歌剧舞剧院'},
            {x: 116.478908, y: 39.957486, title: '世纪剧院'},
            {x: 116.394215, y: 39.858763, title: '北京京剧院'},
            {x: 116.394154, y: 39.952157, title: '鼓楼西剧场'},
            {x: 116.397782, y: 39.948421, title: '广茗阁'},
            {x: 116.41252, y: 39.942424, title: '蓬蒿剧场'},
            {x: 116.418334, y: 39.927887, title: '首都剧场'},
            {x: 116.342878, y: 39.895927, title: '国家话剧院剧场'},
            {x: 116.423455, y: 39.916618, title: '国家话剧院先锋剧场'},
            {x: 116.445202, y: 39.946149, title: '蜂巢剧场'},
            {x: 116.42191, y: 39.931621, title: '东宫影剧院'},
            {x: 116.410661, y: 39.945084, title: '北京儿童艺术剧院'},
            {x: 116.414927, y: 39.921287, title: '中国儿童艺术剧院'},
            {x: 116.350546, y: 39.947607, title: '北展剧场'},
            {x: 116.478908, y: 39.957486, title: '世纪剧院'},
            {x: 116.410656, y: 39.945342, title: '南锣剧场'},
            {x: 116.32496, y: 39.982536, title: '海淀剧院'},
            {x: 116.376727, y: 39.987335, title: '国安剧院'},
            {x: 116.317193, y: 39.95365, title: '八一剧场'},
            {x: 116.407787, y: 39.974563, title: '木偶艺术剧院'},
            {x: 116.322663, y: 39.91767, title: '未来剧院'},
            {x: 116.418988, y: 39.947532, title: '东图剧场'},
        ]

        var simiaoData = [
            {x: 116.037356, y: 39.911876, title: '潭柘寺'},
            {x: 116.376434, y: 39.890972, title: '法源寺'},
            {x: 116.0927, y: 39.875637, title: '戒台寺'},
            {x: 116.632411, y: 40.390454, title: '红螺寺'},
            {x: 116.189886, y: 39.963041, title: '灵光寺'},
            {x: 115.781391, y: 39.615208, title: '云居寺'},
            {x: 116.352588, y: 39.900393, title: '天宁寺塔'},
            {x: 116.230518, y: 40.078371, title: '香岩寺'},
            {x: 116.378703, y: 39.930786, title: '广济寺'},
            {x: 116.349097, y: 39.737293, title: '火神庙'},
            {x: 116.431126, y: 39.893713, title: '法华寺'},
            {x: 116.366124, y: 39.89683, title: '报国寺'},
            {x: 116.397336, y: 39.947695, title: '广化寺'},
            {x: 116.113289, y: 40.058631, title: '大觉寺'},
            {x: 116.134271, y: 39.859917, title: '娘娘庙'},
            {x: 116.438899, y: 39.923716, title: '智化寺'},
            {x: 116.198213, y: 40.003404, title: '碧云寺'},
            {x: 116.672624, y: 39.921144, title: '三教庙'},
            {x: 116.350158, y: 39.90652, title: '白云观'},
            {x: 116.271736, y: 39.805355, title: '大王庙'},
            {x: 116.43532, y: 39.921927, title: '法兴寺'},
            {x: 115.927283, y: 40.124144, title: '白瀑寺'},
            {x: 116.366616, y: 39.916302, title: '都城隍庙'},
            {x: 116.098082, y: 40.109583, title: '龙泉寺'},
            {x: 116.877093, y: 40.407271, title: '普照寺'},
            {x: 116.432527, y: 39.950174, title: '通教寺'},
            {x: 116.688075, y: 39.801451, title: '普渡寺'},
            {x: 116.416976, y: 39.943954, title: '城隍庙'},
            {x: 116.315893, y: 40.00668, title: '正觉寺'},
            {x: 116.336963, y: 39.950627, title: '五塔寺(石刻艺术博物馆)'},
            {x: 116.11278, y: 40.058452 , title: '大觉寺'},
        ]

        var huabing = [
            {x: 116.465087, y: 39.916776, title: '国贸溜冰场(国贸写字楼2座店)'},
            {x: 116.3343, y: 39.949296, title: '首都滑冰馆'},
            {x: 116.304107, y: 39.941913, title: '星宏奥冰上运动发展中心(昆玉店)'},
            {x: 116.241202, y: 39.914821, title: '启迪冰雪体育中心'},
            {x: 116.21771, y: 39.759078, title: '世纪星滑冰场'},
            {x: 116.397319, y: 39.942244, title: '什刹海冰场'},
            {x: 116.339176, y: 40.03595, title: '冰酷(清河万象汇店)'},
            {x: 116.29697, y: 39.965486, title: '冠军溜冰场'},
            {x: 116.205397, y: 39.931245, title: '首钢溜冰场'},
            {x: 116.607626, y: 39.930674, title: '全明星滑冰俱乐部'},
            {x: 116.42217, y: 40.066097, title: ' 浩泰冰上运动中心'},
            {x: 116.486374, y: 40.05744, title: '华星国际冰上运动中心'},
            {x: 116.48734, y: 39.892443, title: '陈露国际冰上中心'},
            {x: 116.483953, y: 39.955386, title: '全明星滑冰俱乐部'},
            {x: 116.525101, y: 39.929899, title: '冠军溜冰场(朝阳大悦城店)'},
            {x: 116.395166, y: 39.929757, title: '北海公园冰场'},
            {x: 116.568101, y: 40.019566, title: '奥众冰上运动俱乐部'},
            {x: 116.327155, y: 39.693321, title: 'xixo喜悦滑冰场'},
            {x: 116.546509, y: 39.954367, title: '小狼国际滑冰俱乐部'},
            {x: 116.614289, y: 39.970209, title: '蓝调庄园滑雪场'},
            {x: 116.546067, y: 39.952355, title: ' 庞清佟健冰上艺术中心'},
            {x: 116.317864, y: 40.001054, title: '北京大学未名湖冰场'},
            {x: 116.631965, y: 40.324703, title: '中体奥冰壶运动中心'},
            {x: 116.429602, y: 39.825516, title: '欧悦滑冰俱乐部'},
            {x: 116.423663, y: 39.902376, title: '浩泰冰上运动中心'},
            {x: 116.441968, y: 40.01425, title: '梦想冰场'},
            {x: 115.989394, y: 40.480319, title: '梦起源滑冰馆'},
            {x: 116.289169, y: 39.915556, title: '五棵松冰上运动中心'},
            {x: 116.254405, y: 40.199634, title: '汇佳-绿雪冰场'},
            {x: 116.324208, y: 39.91893, title: '八一湖冰场'},
            {x: 116.487746, y: 39.953768, title: ' 朝阳公园-冰场'},
            {x: 116.37123, y: 39.965328, title: '师范大学-四季冰场'},
            {x: 116.325687, y: 40.00631, title: '清华大学西湖冰场'},
            {x: 116.423013, y: 39.963311, title: '地坛滑冰馆'},
            {x: 116.698077, y: 40.178809, title: '顺奥冰世界'},
            {x: 116.289506, y: 39.915888, title: '华熙LIVE冰上中心'},
            {x: 116.158814, y: 39.92295, title: '首钢园国家冬季训练中心-花滑馆'},
            {x: 116.350544, y: 39.822861, title: '新发地市场制冰场'},
            {x: 116.470618, y: 39.931562, title: '团结湖公园-轮滑场'},
            {x: 116.51621, y: 40.176343, title: '海源春旱冰场'},
        ]
        

    const handler = (event) => {
        selectData(event.explicitOriginalTarget)
    }

    const selectData = (event) => {
      
      if (event.id == "bowuguan") {
        if (event.checked == true) {
            addOverlay(bowuguanData, 'red')
        } else {
            removeOverlay(bowuguanData)
        }
      }
      if (event.id == "jingdian") {
        if (event.checked == true) {
            addOverlay(jingdianData, 'blue')
        } else {
            removeOverlay(jingdianData)
        }
      }
      if (event.id == "ertong") {
        if (event.checked == true) {
            addOverlay(ertongData, 'green')
        } else {
            removeOverlay(ertongData)
        }
      }
      if (event.id == "jucahng") {
        if (event.checked == true) {
            addOverlay(juchangData, 'Purple')
        } else {
            removeOverlay(juchangData)
        }
      }
      if (event.id == "simiao") {
        if (event.checked == true) {
            addOverlay(simiaoData, 'goldenrod')
        } else {
            removeOverlay(simiaoData)
        }
      }
      if (event.id == "shangchang") {
        if (event.checked == true) {
            addOverlay(shangchangData, 'yellowgreen')
        } else {
            removeOverlay(shangchangData)
        }
      }

    }
    
    selectData(document.querySelector('#bowuguan'))
    selectData(document.querySelector('#jingdian'))
    selectData(document.querySelector('#ertong'))
    selectData(document.querySelector('#jucahng'))
    selectData(document.querySelector('#simiao'))
    selectData(document.querySelector('#shangchang'))
    document.querySelector('#bowuguan').addEventListener('change', handler);
    document.querySelector('#jingdian').addEventListener('change', handler);
    document.querySelector('#ertong').addEventListener('change', handler);
    document.querySelector('#jucahng').addEventListener('change', handler);
    document.querySelector('#simiao').addEventListener('change', handler);
    document.querySelector('#shangchang').addEventListener('change', handler);


    function addOverlay(array, color) {
        array.forEach(function(item, index) {
            map.addOverlay(new BMapGL.Marker(new BMapGL.Point(item.x, item.y)));

            var opts = {
                position: new BMapGL.Point(item.x, item.y), // 指定文本标注所在的地理位置
                offset: new BMapGL.Size(12, -30) // 设置文本偏移量
            };
            // 创建文本标注对象
            var label = new BMapGL.Label(item.title, opts);
            // 自定义文本标注样式
            label.setStyle({
                color: color,
                borderRadius: '5px',
                borderColor: '#ccc',
                padding: '10px',
                fontSize: '13px',
                height: '20px',
                lineHeight: '20px',
                fontFamily: '微软雅黑'
            });
            map.addOverlay(label);
        })
    }

    function removeOverlay(array) {

        var allOverlay = map.getOverlays();
        allOverlay.map(overlay => {
            array.forEach(function(item, index) {
                if(overlay.content == item.title){
                    overlay.hide()
                    map.removeOverlay(overlay);
                }
            })
        })
    }

    try {
        addSubway(map, point);
    } catch(err) {
        console.error('addSubway', err)
    }

    function addSubway(map, point) {
        // 创建 LocalSearch 实例
        const localSearch = new BMapGL.LocalSearch(map, {
                onSearchComplete: function(results) {
                // 搜索完成后的回调函数
                if (localSearch.getStatus() === BMapGL.SearchResult.SEARCH_SUCCESS) {
                    // 搜索成功
                    results.forEach(result => {
                    const marker = new BMapGL.Marker(result.location);
                    map.addOverlay(marker);

                    // 创建信息窗口
                    const infoWindow = new BMapGL.InfoWindow(result.title, {
                        width: 200, // 信息窗口宽度
                        height: 100, // 信息窗口高度
                        title: '地铁站信息' // 信息窗口标题
                    });

                    // 为标记添加点击事件
                    marker.addEventListener('click', function() {
                        this.openInfoWindow(infoWindow);
                    });
                    });
                } else {
                    // 搜索失败
                    console.error('搜索失败');
                }
                }
            });

            // 搜索地铁站
            localSearch.searchNearby('地铁站', point, 5000); // 在点周围1000米范围内搜索地铁站
    }

    try {
        // 创建公交路径搜索实例
        const transit = new BMap.TransitRoute(map, {
            renderOptions: { map: map, panel: "panel" },
            policy: BMAP_TRANSIT_POLICY_LEAST_TIME
        });
    } catch(err) {
        console.error('TransitRoute', err)
    }

    // 查询公交路径
    function searchTransit() {
      const start = document.getElementById("start").value;
      const end = document.getElementById("end").value;
      if (start && end) {
        map.clearOverlays();
        transit.search(start, end);
      } else {
        alert("请输入起点和终点");
      }
    }

   
    try {
         // 创建自驾路径搜索实例
         const driving = new BMap.DrivingRoute(map, {
            renderOptions: { map: map, panel: "panel" },
            policy: BMAP_DRIVING_POLICY_LEAST_TIME
        });
    } catch(err) {
        console.error('DrivingRoute', err)
    }

    // 查询自驾路径
    function searchDriving() {
        const start = document.getElementById("start").value;
        const end = document.getElementById("end").value;
        if (start && end) {
            map.clearOverlays();
            driving.search(start, end);
        } else {
            alert("请输入起点和终点");
        }
    }

</script> 
</body> 
</html>
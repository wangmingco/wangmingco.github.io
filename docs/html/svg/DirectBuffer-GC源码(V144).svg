<svg xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" viewBox="0 0 5622 2391" width="5622" xmlns:xlink="http://www.w3.org/1999/xlink" height="2391"><defs/><g transform="translate(5.5,5.5)" id="page2"><rect width="5613" height="2381" x="0" y="0" fill="none"/><g transform="matrix(0.000000,1.000000,-1.000000,0.000000,1783.520000,59.000000)" id="group1"><g id="group2"><path stroke="#191919" stroke-width="1" d="M.0,.0L1056.0,.0L1056.0,510.0L.0,510.0L.0,.0z" fill="none" id="shape3"/><g transform="matrix(0.000000,-1.000000,1.000000,0.000000,-0.000000,510.000000)" id="shape4"><path stroke="#191919" stroke-width="1" d="M.0,.0L510.0,.0L510.0,56.7L.0,56.7L.0,.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="204.0" y="34.0">DirectByteBuffer</tspan></text></g></g></g><g transform="translate(1397.020000,150.000000)" id="shape5"><path stroke="#191919" stroke-width="1" d="M20.0,60.0L225.0,60.0L245.0,30.0L225.0,.0L20.0,.0L.0,30.0L20.0,60.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="46.5" y="35.5">DirectByteBuffer(int cap)</tspan></text></g><g transform="translate(1349.520000,243.000000)" id="shape6"><path stroke="#191919" stroke-width="1" d="M340.0,74.0L340.0,7.0C340.0,3.1,336.9,.0,333.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,74.0C.0,77.9,3.1,81.0,7.0,81.0L333.0,81.0C336.9,81.0,340.0,77.9,340.0,74.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.0" y="27.0">boolean pa = VM.isDirectMemoryPageAligned();</tspan><tspan style="font-size:10.00pt" x="4.0" y="46.0">int ps = Bits.pageSize();	</tspan><tspan style="font-size:10.00pt" x="4.0" y="65.0">long size = Math.max(1L, cap + (pa ? ps : 0));</tspan></text></g><g transform="translate(1349.520000,460.000000)" id="shape7"><path stroke="#191919" stroke-width="1" d="M340.0,52.5L340.0,7.0C340.0,3.1,336.9,.0,333.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,52.5C.0,56.4,3.1,59.5,7.0,59.5L333.0,59.5C336.9,59.5,340.0,56.4,340.0,52.5z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.0" y="26.0">base = unsafe.allocateMemory(size);	// 分配内存</tspan><tspan style="font-size:10.00pt" x="4.0" y="45.0">unsafe.setMemory(base, size, (byte) 0);</tspan></text></g><g transform="translate(1519.520000,210.000000)" id="shape8"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,27.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,27.0L.0,33.0L-3.0,27.0L3.0,27.0" fill="#191919"/></g><g transform="translate(1519.520000,426.000000)" id="shape9"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,27.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,27.0L.0,33.0L-3.0,27.0L3.0,27.0" fill="#191919"/></g><g transform="translate(1349.520000,555.250000)" id="shape10"><path stroke="#191919" stroke-width="1" d="M340.0,52.5L340.0,7.0C340.0,3.1,336.9,.0,333.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,52.5C.0,56.4,3.1,59.5,7.0,59.5L333.0,59.5C336.9,59.5,340.0,56.4,340.0,52.5z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.0" y="26.0">cleaner = Cleaner.create(this, new Deallocator(base, </tspan><tspan style="font-size:10.00pt" x="4.0" y="45.0">size, cap));</tspan></text></g><g transform="translate(1519.520000,519.500000)" id="shape11"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,30.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,30.0L.0,36.0L-3.0,30.0L3.0,30.0" fill="#191919"/></g><g transform="matrix(0.000000,1.000000,-1.000000,0.000000,1273.000000,60.000000)" id="group12"><g id="group13"><path stroke="#191919" stroke-width="1" d="M.0,.0L1471.0,.0L1471.0,1216.0L.0,1216.0L.0,.0z" fill="none" id="shape14"/><g transform="matrix(0.000000,-1.000000,1.000000,0.000000,-0.000000,1216.000000)" id="shape15"><path stroke="#191919" stroke-width="1" d="M.0,.0L1216.0,.0L1216.0,56.7L.0,56.7L.0,.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="585.0" y="34.0">Cleaner</tspan></text></g></g></g><g transform="matrix(0.000000,1.000000,-1.000000,0.000000,3087.520000,57.000000)" id="group16"><g id="group17"><path stroke="#191919" stroke-width="1" d="M.0,.0L954.0,.0L954.0,1304.0L.0,1304.0L.0,.0z" fill="none" id="shape18"/><g transform="matrix(0.000000,-1.000000,1.000000,0.000000,-0.000000,1304.000000)" id="shape19"><path stroke="#191919" stroke-width="1" d="M.0,.0L1304.0,.0L1304.0,56.7L.0,56.7L.0,.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="641.0" y="34.0">Bits</tspan></text></g></g></g><g transform="translate(1349.520000,366.500000)" id="shape20"><path stroke="#191919" stroke-width="1" d="M340.0,52.5L340.0,7.0C340.0,3.1,336.9,.0,333.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,52.5C.0,56.4,3.1,59.5,7.0,59.5L333.0,59.5C336.9,59.5,340.0,56.4,340.0,52.5z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.0" y="35.5">Bits.reserveMemory(size, cap); // 计算内存是否足够</tspan></text></g><g transform="translate(1519.520000,324.000000)" id="shape21"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,36.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,36.0L.0,42.0L-3.0,36.0L3.0,36.0" fill="#191919"/></g><g transform="translate(2658.520000,140.000000)" id="shape22"><path stroke="#191919" stroke-width="1" d="M20.0,60.0L225.0,60.0L245.0,30.0L225.0,.0L20.0,.0L.0,30.0L20.0,60.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="19.5" y="35.5">reserveMemory(long size, int cap)</tspan></text></g><g transform="translate(1689.520000,396.250000)" id="shape23"><path stroke="#191919" stroke-width="1" stroke-dasharray="11,5" d="M.0,.0L57.0,.0L57.0,-226.3L963.0,-226.3" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M963.0,-229.3L969.0,-226.3L963.0,-223.3L963.0,-229.3" fill="#191919"/></g><g transform="translate(2650.140000,225.750000)" id="shape24"><path stroke="#191919" stroke-width="1" d="M132.0,44.0L264.0,22.0L132.0,.0L.0,22.0L132.0,44.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:Microsoft YaHei UI,PingFang SC,Mircrosoft YaHei,Arial;font-size:11.25pt"><tspan style="font-size:9.00pt" x="48.0" y="26.5">tryReserveMemory(size, cap)</tspan></text></g><g transform="translate(2781.020000,200.000000)" id="shape25"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,20.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,20.0L.0,26.0L-3.0,20.0L3.0,20.0" fill="#191919"/></g><g transform="translate(2019.230000,264.000000)" id="shape26"><path stroke="#191919" stroke-width="1" d="M20.0,60.0L225.0,60.0L245.0,30.0L225.0,.0L20.0,.0L.0,30.0L20.0,60.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="24.5" y="26.0">tryReserveMemory(long size, int </tspan><tspan style="font-size:10.00pt" x="109.5" y="45.0">cap)</tspan></text></g><g transform="translate(2979.520000,230.750000)" id="shape27"><path stroke="#191919" stroke-width="1" d="M22.0,44.0L67.0,44.0L67.0,44.0C79.2,44.0,89.0,34.2,89.0,22.0C89.0,9.8,79.2,.0,67.0,.0L22.0,.0L22.0,.0C9.8,.0,.0,9.8,.0,22.0C.0,34.2,9.8,44.0,22.0,44.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="25.5" y="27.5">return</tspan></text></g><g transform="translate(2914.140000,247.750000)" id="shape28"><path stroke="#191919" stroke-width="1" d="M.0,.0L38.0,.0L38.0,5.0L60.0,5.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M60.0,2.0L66.0,5.0L60.0,8.0L60.0,2.0" fill="#191919"/><rect width="25.0" height="19.0" x="17.0" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="17.0" y="5.5">true</tspan></text></g><g transform="translate(2028.730000,382.000000)" id="shape29"><path stroke="#191919" stroke-width="1" d="M226.0,37.0L226.0,7.0C226.0,3.1,222.9,.0,219.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,37.0C.0,40.9,3.1,44.0,7.0,44.0L219.0,44.0C222.9,44.0,226.0,40.9,226.0,37.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="22.0" y="27.5">totalCap = totalCapacity.get()</tspan></text></g><g transform="translate(2002.230000,482.000000)" id="shape30"><path stroke="#191919" stroke-width="1" d="M139.5,44.0L279.0,22.0L139.5,.0L.0,22.0L139.5,44.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:Microsoft YaHei UI,PingFang SC,Mircrosoft YaHei,Arial;font-size:11.25pt"><tspan style="font-size:9.00pt" x="75.0" y="18.0">cap &lt;= maxMemory - </tspan><tspan style="font-size:9.00pt" x="115.0" y="35.0">totalCap</tspan></text></g><g transform="translate(2141.730000,324.000000)" id="shape31"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,52.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,52.0L.0,58.0L-3.0,52.0L3.0,52.0" fill="#191919"/></g><g transform="translate(2141.730000,426.000000)" id="shape32"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,50.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,50.0L.0,56.0L-3.0,50.0L3.0,50.0" fill="#191919"/></g><g transform="translate(2019.230000,582.000000)" id="shape33"><path stroke="#191919" stroke-width="1" d="M245.0,50.0L245.0,7.0C245.0,3.1,241.9,.0,238.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,50.0C.0,53.9,3.1,57.0,7.0,57.0L238.0,57.0C241.9,57.0,245.0,53.9,245.0,50.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="17.5" y="24.5">r = totalCapacity.compareAndSet(</tspan><tspan style="font-size:10.00pt" x="45.0" y="43.5">totalCap, totalCap + cap)</tspan></text></g><g transform="translate(2141.730000,526.000000)" id="shape34"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,50.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,50.0L.0,56.0L-3.0,50.0L3.0,50.0" fill="#191919"/><rect width="25.0" height="19.0" x="-11.5" y="14.2" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-11.5" y="29.2">true</tspan></text></g><g transform="translate(2019.230000,682.750000)" id="shape35"><path stroke="#191919" stroke-width="1" d="M122.5,44.5L245.0,22.3L122.5,.0L.0,22.3L122.5,44.5z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:Microsoft YaHei UI,PingFang SC,Mircrosoft YaHei,Arial;font-size:11.25pt"><tspan style="font-size:9.00pt" x="95.5" y="26.8">r == true</tspan></text></g><g transform="translate(2141.730000,639.000000)" id="shape36"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,37.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,37.0L.0,43.0L-3.0,37.0L3.0,37.0" fill="#191919"/></g><g transform="translate(2264.230000,705.000000)" id="shape37"><path stroke="#191919" stroke-width="1" d="M.0,.0L71.0,.0L71.0,-301.0L-3.5,-301.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-3.5,-298.0L-9.5,-301.0L-3.5,-304.0L-3.5,-298.0" fill="#191919"/><rect width="28.0" height="19.0" x="58.0" y="-159.4" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="58.0" y="-144.4">false</tspan></text></g><g transform="translate(2019.230000,771.000000)" id="shape38"><path stroke="#191919" stroke-width="1" d="M245.0,63.0L245.0,7.0C245.0,3.1,241.9,.0,238.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,63.0C.0,66.9,3.1,70.0,7.0,70.0L238.0,70.0C241.9,70.0,245.0,66.9,245.0,63.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.0" y="21.5">reservedMemory.addAndGet(size);</tspan><tspan style="font-size:10.00pt" x="4.0" y="40.5">count.incrementAndGet();</tspan><tspan style="font-size:10.00pt" x="4.0" y="59.5">return true;</tspan></text></g><g transform="translate(2141.730000,727.250000)" id="shape39"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,37.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,37.0L.0,43.0L-3.0,37.0L3.0,37.0" fill="#191919"/><rect width="25.0" height="19.0" x="-11.5" y="13.2" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-11.5" y="28.2">true</tspan></text></g><g transform="translate(1841.730000,482.000000)" id="shape40"><path stroke="#191919" stroke-width="1" d="M22.0,44.0L67.0,44.0L67.0,44.0C79.2,44.0,89.0,34.2,89.0,22.0C89.0,9.8,79.2,.0,67.0,.0L22.0,.0L22.0,.0C9.8,.0,.0,9.8,.0,22.0C.0,34.2,9.8,44.0,22.0,44.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="25.5" y="27.5">return</tspan></text></g><g transform="translate(2002.230000,504.000000)" id="shape41"><path stroke="#191919" stroke-width="1" d="M.0,.0L-65.0,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-65.0,3.0L-71.0,.0L-65.0,-3.0L-65.0,3.0" fill="#191919"/><rect width="25.0" height="19.0" x="-56.3" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-56.3" y="5.5">true</tspan></text></g><g transform="translate(2654.020000,356.000000)" id="shape42"><path stroke="#191919" stroke-width="1" d="M254.5,37.0L254.5,7.0C254.5,3.1,251.4,.0,247.5,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,37.0C.0,40.9,3.1,44.0,7.0,44.0L247.5,44.0C251.4,44.0,254.5,40.9,254.5,37.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="50.3" y="18.0">JavaLangRefAccess jlra = </tspan><tspan style="font-size:10.00pt" x="7.3" y="37.0">SharedSecrets.getJavaLangRefAccess();</tspan></text></g><g transform="translate(2782.140000,269.750000)" id="shape43"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,81.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,81.0L.0,87.0L-3.0,81.0L3.0,81.0" fill="#191919"/><rect width="28.0" height="19.0" x="-13.0" y="33.0" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-13.0" y="48.0">false</tspan></text></g><g transform="translate(2701.520000,543.250000)" id="shape44"><path stroke="#191919" stroke-width="1" d="M80.0,53.5L160.0,26.8L80.0,.0L.0,26.8L80.0,53.5z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:Microsoft YaHei UI,PingFang SC,Mircrosoft YaHei,Arial;font-size:11.25pt"><tspan style="font-size:9.00pt" x="53.0" y="31.3">r == true</tspan></text></g><g transform="translate(2781.270000,400.000000)" id="shape45"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,45.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,45.0L.0,51.0L-3.0,45.0L3.0,45.0" fill="#191919"/></g><g transform="translate(2383.520000,548.000000)" id="shape46"><path stroke="#191919" stroke-width="1" d="M132.0,44.0L264.0,22.0L132.0,.0L.0,22.0L132.0,44.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:Microsoft YaHei UI,PingFang SC,Mircrosoft YaHei,Arial;font-size:11.25pt"><tspan style="font-size:9.00pt" x="48.0" y="26.5">tryReserveMemory(size, cap)</tspan></text></g><g transform="translate(2515.520000,548.000000)" id="shape47"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,-75.0L135.0,-75.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M135.0,-78.0L141.0,-75.0L135.0,-72.0L135.0,-78.0" fill="#191919"/><rect width="28.0" height="19.0" x="32.2" y="-84.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="32.2" y="-69.5">false</tspan></text></g><g transform="translate(2515.520000,592.000000)" id="shape48"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,278.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,278.0L.0,284.0L-3.0,278.0L3.0,278.0" fill="#191919"/><rect width="25.0" height="19.0" x="-11.5" y="56.3" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-11.5" y="71.3">true</tspan></text></g><g transform="translate(2669.140000,682.750000)" id="shape49"><path stroke="#191919" stroke-width="1" d="M226.0,37.0L226.0,7.0C226.0,3.1,222.9,.0,219.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,37.0C.0,40.9,3.1,44.0,7.0,44.0L219.0,44.0C222.9,44.0,226.0,40.9,226.0,37.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="76.0" y="27.5">System.gc();</tspan></text></g><g transform="translate(2781.520000,596.750000)" id="shape50"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,80.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,80.0L.0,86.0L-3.0,80.0L3.0,80.0" fill="#191919"/><rect width="28.0" height="19.0" x="-13.0" y="24.1" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-13.0" y="39.1">false</tspan></text></g><g transform="translate(2731.270000,769.000000)" id="shape51"><path stroke="#191919" stroke-width="1" d="M.0,44.0L100.0,44.0L100.0,11.0L89.0,.0L11.0,.0L.0,11.0L.0,44.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="37.5" y="27.5">true</tspan></text></g><g transform="translate(2648.520000,876.000000)" id="shape52"><path stroke="#191919" stroke-width="1" d="M132.0,44.0L264.0,22.0L132.0,.0L.0,22.0L132.0,44.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:Microsoft YaHei UI,PingFang SC,Mircrosoft YaHei,Arial;font-size:11.25pt"><tspan style="font-size:9.00pt" x="48.0" y="26.5">tryReserveMemory(size, cap)</tspan></text></g><g transform="translate(2471.020000,876.000000)" id="shape53"><path stroke="#191919" stroke-width="1" d="M22.0,44.0L67.0,44.0L67.0,44.0C79.2,44.0,89.0,34.2,89.0,22.0C89.0,9.8,79.2,.0,67.0,.0L22.0,.0L22.0,.0C9.8,.0,.0,9.8,.0,22.0C.0,34.2,9.8,44.0,22.0,44.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="25.5" y="27.5">return</tspan></text></g><g transform="translate(2648.520000,898.000000)" id="shape54"><path stroke="#191919" stroke-width="1" d="M.0,.0L-83.0,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-83.0,3.0L-89.0,.0L-83.0,-3.0L-83.0,3.0" fill="#191919"/><rect width="25.0" height="19.0" x="-47.3" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-47.3" y="5.5">true</tspan></text></g><g transform="translate(2781.720000,726.750000)" id="shape55"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,37.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,37.0L.0,43.0L-3.0,37.0L3.0,37.0" fill="#191919"/></g><g transform="translate(2781.270000,813.000000)" id="shape56"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,57.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,57.0L.0,63.0L-3.0,57.0L3.0,57.0" fill="#191919"/></g><g transform="matrix(0.000000,1.000000,-1.000000,0.000000,3073.306000,135.000000)" id="shape57"><path stroke="#fd8851" stroke-width="1" d="M35.0,143.8L35.0,143.8M.0,.0L70.0,.0L70.0,143.8L.0,143.8L.0,.0z" fill-rule="nonzero" fill="#fff4e8"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt" transform="matrix(0.00,-1.00,1.00,0.00,-36.9,106.9)"><tspan style="font-size:10.00pt" x="-23.5" y="58.4">无论是分配还是释放</tspan><tspan style="font-size:10.00pt" x="-23.0" y="77.4">direct memory，都</tspan><tspan style="font-size:10.00pt" x="-10.5" y="96.4">应调用这个方法</tspan></text></g><g transform="matrix(0.000000,1.000000,-1.000000,0.000000,1982.020000,278.000000)" id="shape58"><path stroke="#fd8851" stroke-width="1" d="M17.0,.0L16.0,-37.2M.0,.0L34.0,.0L34.0,143.8L.0,143.8L.0,.0z" fill-rule="nonzero" fill="#fff4e8"/><path stroke="#fd8851" stroke-width="1" stroke-linecap="round" d="M15.9,-41.2C18.1,-41.3,19.9,-39.5,20.0,-37.3C20.1,-35.1,18.3,-33.3,16.1,-33.2C13.9,-33.2,12.1,-34.9,12.0,-37.1C11.9,-39.3,13.7,-41.2,15.9,-41.2" fill="#fd8851"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt" transform="matrix(0.00,-1.00,1.00,0.00,-54.9,88.9)"><tspan style="font-size:10.00pt" x="-28.5" y="77.4">判断内存会否够</tspan></text></g><g transform="matrix(0.000000,1.000000,-1.000000,0.000000,4422.000000,57.000000)" id="group59"><g id="group60"><path stroke="#191919" stroke-width="1" d="M.0,.0L954.0,.0L954.0,1334.5L.0,1334.5L.0,.0z" fill="none" id="shape61"/><g transform="matrix(0.000000,-1.000000,1.000000,0.000000,-0.000000,1334.480000)" id="shape62"><path stroke="#191919" stroke-width="1" d="M.0,.0L1334.5,.0L1334.5,56.7L.0,56.7L.0,.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="598.7" y="34.0">java.lang.ref.Reference</tspan></text></g></g></g><g transform="translate(3228.020000,140.000000)" id="shape63"><path stroke="#191919" stroke-width="1" d="M20.0,60.0L225.0,60.0L245.0,30.0L225.0,.0L20.0,.0L.0,30.0L20.0,60.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="96.0" y="26.0">static { } </tspan><tspan style="font-size:10.00pt" x="70.5" y="45.0">静态代码块初始化</tspan></text></g><g transform="translate(3137.520000,229.000000)" id="shape64"><path stroke="#191919" stroke-width="1" d="M427.5,81.0L427.5,7.0C427.5,3.1,424.3,.0,420.5,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,81.0C.0,84.9,3.1,88.0,7.0,88.0L420.5,88.0C424.3,88.0,427.5,84.9,427.5,81.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="11.7" y="30.5">Thread handler = new ReferenceHandler(tg, "Reference Handler");</tspan><tspan style="font-size:10.00pt" x="83.2" y="49.5">handler.setPriority(Thread.MAX_PRIORITY);</tspan><tspan style="font-size:10.00pt" x="136.2" y="68.5">handler.setDaemon(true);</tspan></text></g><g transform="translate(3144.520000,405.000000)" id="shape65"><path stroke="#191919" stroke-width="1" d="M417.5,129.0L417.5,7.0C417.5,3.1,414.3,.0,410.5,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,129.0C.0,132.9,3.1,136.0,7.0,136.0L410.5,136.0C414.3,136.0,417.5,132.9,417.5,129.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.2" y="26.0">SharedSecrets.setJavaLangRefAccess(new JavaLangRefAccess() {</tspan><tspan style="font-size:10.00pt" x="4.2" y="45.0">        @Override</tspan><tspan style="font-size:10.00pt" x="4.2" y="64.0">        public boolean tryHandlePendingReference() {</tspan><tspan style="font-size:10.00pt" x="4.2" y="83.0">            return tryHandlePending(false);</tspan><tspan style="font-size:10.00pt" x="4.2" y="102.0">        }</tspan><tspan style="font-size:10.00pt" x="4.2" y="121.0">    });</tspan></text></g><g transform="translate(2650.140000,247.750000)" id="shape66"><path stroke="#191919" stroke-width="1" stroke-dasharray="11,5" d="M.0,.0L-508.0,.0L-508.0,11.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-505.0,11.0L-508.0,17.0L-511.0,11.0L-505.0,11.0" fill="#191919"/></g><g transform="translate(2655.765000,451.000000)" id="shape67"><path stroke="#191919" stroke-width="1" d="M252.8,37.0L252.8,7.0C252.8,3.1,249.6,.0,245.8,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,37.0C.0,40.9,3.1,44.0,7.0,44.0L245.8,44.0C249.6,44.0,252.8,40.9,252.8,37.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="14.9" y="27.5">r = jlra.tryHandlePendingReference()</tspan></text></g><g transform="translate(2782.140000,495.000000)" id="shape68"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,42.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,42.0L.0,48.0L-3.0,42.0L3.0,42.0" fill="#191919"/></g><g transform="translate(2701.520000,570.000000)" id="shape69"><path stroke="#191919" stroke-width="1" d="M.0,.0L-49.0,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-49.0,3.0L-55.0,.0L-49.0,-3.0L-49.0,3.0" fill="#191919"/><rect width="25.0" height="19.0" x="-36.5" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-36.5" y="5.5">true</tspan></text></g><g transform="translate(3350.520000,200.000000)" id="shape70"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,23.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,23.0L.0,29.0L-3.0,23.0L3.0,23.0" fill="#191919"/></g><g transform="translate(3351.260000,317.000000)" id="shape71"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,17.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,17.0L.0,23.0L-3.0,17.0L3.0,17.0" fill="#191919"/></g><g transform="translate(2908.520000,473.000000)" id="shape72"><path stroke="#191919" stroke-width="1.3333300352096558" stroke-dasharray="14.6666,6.66665,3.33333,6.66665" d="M.0,.0L230.1,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M230.1,-3.5L237.0,.0L230.1,3.5L230.1,-3.5" fill="#191919"/></g><g transform="translate(3736.000000,443.000000)" id="shape73"><path stroke="#191919" stroke-width="1" d="M20.0,60.0L225.0,60.0L245.0,30.0L225.0,.0L20.0,.0L.0,30.0L20.0,60.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="41.0" y="26.0">tryHandlePending(boolean </tspan><tspan style="font-size:10.00pt" x="78.5" y="45.0">waitForNotify)</tspan></text></g><g transform="translate(3562.000000,473.000000)" id="shape74"><path stroke="#191919" stroke-width="1" stroke-dasharray="11,5" d="M.0,.0L168.0,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M168.0,-3.0L174.0,.0L168.0,3.0L168.0,-3.0" fill="#191919"/></g><g transform="translate(3144.520000,428.836000)" id="shape75"><path stroke="#191919" stroke-width="1.3333300352096558" stroke-dasharray="14.6666,6.66665,3.33333,6.66665" d="M.0,.0L-208.0,.0L-208.0,-50.0L-229.1,-50.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-229.1,-46.5L-236.0,-50.0L-229.1,-53.5L-229.1,-46.5" fill="#191919"/></g><g transform="translate(3138.520000,340.000500)" id="shape76"><path stroke="#191919" stroke-width="1" d="M427.5,27.9L427.5,7.0C427.5,3.1,424.3,.0,420.5,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,27.9C.0,31.7,3.1,34.9,7.0,34.9L420.5,34.9C424.3,34.9,427.5,31.7,427.5,27.9z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="169.7" y="22.9">handler.start();</tspan></text></g><g transform="translate(3352.260000,374.875000)" id="shape77"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,25.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,25.0L.0,31.0L-3.0,25.0L3.0,25.0" fill="#191919"/></g><g transform="translate(3736.000000,140.000000)" id="shape78"><path stroke="#191919" stroke-width="1" d="M592.0,266.0L592.0,.0L.0,.0L.0,266.0L592.0,266.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.0" y="19.0">ReferenceHandler</tspan></text></g><g transform="translate(3808.500000,178.000000)" id="shape79"><path stroke="#191919" stroke-width="1" d="M20.0,60.0L158.5,60.0L178.5,30.0L158.5,.0L20.0,.0L.0,30.0L20.0,60.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="74.8" y="35.5">run()</tspan></text></g><g transform="translate(4089.000000,178.000000)" id="shape80"><path stroke="#191919" stroke-width="1" d="M.0,60.0L100.0,60.0L100.0,15.0L85.0,.0L15.0,.0L.0,15.0L.0,60.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="37.5" y="35.5">true</tspan></text></g><g transform="translate(3566.000000,357.438000)" id="shape81"><path stroke="#191919" stroke-width="1" stroke-dasharray="11,5" d="M.0,.0L81.0,.0L81.0,-149.4L236.5,-149.4" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M236.5,-152.4L242.5,-149.4L236.5,-146.4L236.5,-152.4" fill="#191919"/></g><g transform="translate(3988.000000,208.000000)" id="shape82"><path stroke="#191919" stroke-width="1" d="M.0,.0L95.0,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M95.0,-3.0L101.0,.0L95.0,3.0L95.0,-3.0" fill="#191919"/></g><g transform="translate(3994.380000,291.000000)" id="shape83"><path stroke="#191919" stroke-width="1" d="M289.2,42.0L289.2,7.0C289.2,3.1,286.1,.0,282.2,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,42.0C.0,45.9,3.1,49.0,7.0,49.0L282.2,49.0C286.1,49.0,289.2,45.9,289.2,42.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="71.6" y="30.0">tryHandlePending(true);</tspan></text></g><g transform="translate(4139.000000,238.000000)" id="shape84"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,47.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,47.0L.0,53.0L-3.0,47.0L3.0,47.0" fill="#191919"/></g><g transform="translate(4139.000000,340.000000)" id="shape85"><path stroke="#191919" stroke-width="1" stroke-dasharray="11,5" d="M.0,.0L.0,133.0L-152.0,133.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-152.0,136.0L-158.0,133.0L-152.0,130.0L-152.0,136.0" fill="#191919"/></g><g transform="translate(3163.000000,624.000000)" id="shape86"><path stroke="#191919" stroke-width="1" d="M371.0,321.0L371.0,.0L.0,.0L.0,321.0L371.0,321.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.0" y="19.0">Reference 内部结构，该结构顺序不可变</tspan></text></g><g transform="translate(3211.260000,688.201000)" id="shape87"><path stroke="#191919" stroke-width="1" d="M274.0,34.0L274.0,7.0C274.0,3.1,270.9,.0,267.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,34.0C.0,37.9,3.1,41.0,7.0,41.0L267.0,41.0C270.9,41.0,274.0,37.9,274.0,34.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="107.0" y="26.0">T referent</tspan></text></g><g transform="translate(3211.260000,739.701000)" id="shape88"><path stroke="#191919" stroke-width="1" d="M274.0,45.0L274.0,7.0C274.0,3.1,270.9,.0,267.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,45.0C.0,48.9,3.1,52.0,7.0,52.0L267.0,52.0C270.9,52.0,274.0,48.9,274.0,45.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.0" y="31.5">volatile ReferenceQueue&lt;? super T> queue</tspan></text></g><g transform="translate(3211.260000,800.402000)" id="shape89"><path stroke="#191919" stroke-width="1" d="M274.0,34.0L274.0,7.0C274.0,3.1,270.9,.0,267.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,34.0C.0,37.9,3.1,41.0,7.0,41.0L267.0,41.0C270.9,41.0,274.0,37.9,274.0,34.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="91.0" y="26.0">Reference next</tspan></text></g><g transform="translate(3211.260000,858.201000)" id="shape90"><path stroke="#191919" stroke-width="1" d="M274.0,34.0L274.0,7.0C274.0,3.1,270.9,.0,267.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,34.0C.0,37.9,3.1,41.0,7.0,41.0L267.0,41.0C270.9,41.0,274.0,37.9,274.0,34.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="6.0" y="26.0">transient private Reference&lt;T> discovered</tspan></text></g><g transform="translate(805.500000,153.000000)" id="shape91"><path stroke="#191919" stroke-width="1" d="M20.0,52.0L335.0,52.0L355.0,26.0L335.0,.0L20.0,.0L.0,26.0L20.0,52.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="71.0" y="31.5">create(Object var0, Runnable var1)</tspan></text></g><g transform="translate(340.000000,153.000000)" id="shape92"><path stroke="#191919" stroke-width="1" d="M379.0,45.0L379.0,7.0C379.0,3.1,375.9,.0,372.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,45.0C.0,48.9,3.1,52.0,7.0,52.0L372.0,52.0C375.9,52.0,379.0,48.9,379.0,45.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="15.5" y="31.5"> return var1 == null ? null : add(new Cleaner(var0, var1));</tspan></text></g><g transform="translate(805.500000,179.000000)" id="shape93"><path stroke="#191919" stroke-width="1" d="M.0,.0L-80.0,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-80.0,3.0L-86.0,.0L-80.0,-3.0L-80.0,3.0" fill="#191919"/></g><g transform="translate(340.000000,230.500000)" id="shape94"><path stroke="#191919" stroke-width="1" d="M379.0,140.5L379.0,7.0C379.0,3.1,375.9,.0,372.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,140.5C.0,144.4,3.1,147.5,7.0,147.5L372.0,147.5C375.9,147.5,379.0,144.4,379.0,140.5z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.0" y="12.8">    private static synchronized Cleaner add(Cleaner var0) {</tspan><tspan style="font-size:10.00pt" x="4.0" y="31.8">        if (first != null) {</tspan><tspan style="font-size:10.00pt" x="4.0" y="50.8">            var0.next = first;</tspan><tspan style="font-size:10.00pt" x="4.0" y="69.8">            first.prev = var0;</tspan><tspan style="font-size:10.00pt" x="4.0" y="88.8">        }</tspan><tspan style="font-size:10.00pt" x="4.0" y="107.8">        first = var0;</tspan><tspan style="font-size:10.00pt" x="4.0" y="126.8">        return var0;</tspan><tspan style="font-size:10.00pt" x="4.0" y="145.8">    }</tspan></text></g><g transform="translate(529.500000,205.000000)" id="shape95"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,19.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,19.0L.0,25.0L-3.0,19.0L3.0,19.0" fill="#191919"/></g><g transform="translate(1349.520000,585.000000)" id="shape96"><path stroke="#191919" stroke-width="1" stroke-dasharray="11,5" d="M.0,.0L-26.5,.0L-26.5,-406.0L-183.0,-406.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-183.0,-403.0L-189.0,-406.0L-183.0,-409.0L-183.0,-403.0" fill="#191919"/></g><g transform="translate(529.500000,378.000000)" id="shape97"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,80.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,80.0L.0,86.0L-3.0,80.0L3.0,80.0" fill="#191919"/><rect width="78.0" height="19.0" x="-38.0" y="32.9" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-38.0" y="47.9">构建出的链表</tspan></text></g><g transform="translate(80.500000,124.000000)" id="shape98"><path stroke="#191919" stroke-width="1" d="M227.0,52.0L227.0,.0L.0,.0L.0,52.0L227.0,52.0z" fill-rule="nonzero" fill="#eb8989"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="94.0" y="22.0">继承自 </tspan><tspan style="font-size:10.00pt" x="24.5" y="41.0">PhantomReference&lt;Object></tspan></text></g><g transform="translate(109.000000,463.625000)" id="shape99"><path stroke="#191919" stroke-width="1" d="M841.0,698.4L841.0,.0L.0,.0L.0,698.4L841.0,698.4z" fill-rule="nonzero" fill="#e9edf8"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.0" y="19.0">Cleaner 内部链表</tspan></text></g><g transform="translate(402.005000,681.060000)" id="shape100"><path stroke="#191919" stroke-width="1" d="M223.5,376.9L223.5,.0L.0,.0L.0,376.9L223.5,376.9z" fill-rule="nonzero" fill="#e9f4ed"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:15.00pt"><tspan style="font-size:12.00pt" x="82.7" y="21.0">Cleaner</tspan></text></g><g transform="translate(418.928300,794.000100)" id="shape101"><path stroke="#191919" stroke-width="1" d="M189.2,43.8L189.2,7.0C189.2,3.1,186.0,.0,182.2,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,43.8C.0,47.7,3.1,50.8,7.0,50.8L182.2,50.8C186.0,50.8,189.2,47.7,189.2,43.8z" fill-rule="nonzero" fill="#87cfa5"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="39.1" y="30.9">static Cleaner first</tspan></text></g><g transform="translate(419.391300,854.315100)" id="shape102"><path stroke="#191919" stroke-width="1" d="M189.2,43.8L189.2,7.0C189.2,3.1,186.0,.0,182.2,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,43.8C.0,47.7,3.1,50.8,7.0,50.8L182.2,50.8C186.0,50.8,189.2,47.7,189.2,43.8z" fill-rule="nonzero" fill="#ffe8cd"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="56.1" y="30.9">Cleaner next</tspan></text></g><g transform="translate(419.391300,914.630100)" id="shape103"><path stroke="#191919" stroke-width="1" d="M189.2,43.8L189.2,7.0C189.2,3.1,186.0,.0,182.2,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,43.8C.0,47.7,3.1,50.8,7.0,50.8L182.2,50.8C186.0,50.8,189.2,47.7,189.2,43.8z" fill-rule="nonzero" fill="#ffe8cd"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="56.1" y="30.9">Cleaner prev</tspan></text></g><g transform="translate(418.928300,985.524100)" id="shape104"><path stroke="#191919" stroke-width="1" d="M189.2,43.8L189.2,7.0C189.2,3.1,186.0,.0,182.2,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,43.8C.0,47.7,3.1,50.8,7.0,50.8L182.2,50.8C186.0,50.8,189.2,47.7,189.2,43.8z" fill-rule="nonzero" fill="#8ba7e1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="31.1" y="30.9">final Runnable thunk</tspan></text></g><g transform="translate(126.617000,681.060000)" id="shape105"><path stroke="#191919" stroke-width="1" d="M223.5,376.9L223.5,.0L.0,.0L.0,376.9L223.5,376.9z" fill-rule="nonzero" fill="#e9f4ed"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:15.00pt"><tspan style="font-size:12.00pt" x="50.7" y="21.0">Cleaner（First）</tspan></text></g><g transform="translate(143.539300,794.000100)" id="shape106"><path stroke="#191919" stroke-width="1" d="M189.2,43.8L189.2,7.0C189.2,3.1,186.0,.0,182.2,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,43.8C.0,47.7,3.1,50.8,7.0,50.8L182.2,50.8C186.0,50.8,189.2,47.7,189.2,43.8z" fill-rule="nonzero" fill="#87cfa5"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="39.1" y="30.9">static Cleaner first</tspan></text></g><g transform="translate(144.003300,854.315100)" id="shape107"><path stroke="#191919" stroke-width="1" d="M189.2,43.8L189.2,7.0C189.2,3.1,186.0,.0,182.2,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,43.8C.0,47.7,3.1,50.8,7.0,50.8L182.2,50.8C186.0,50.8,189.2,47.7,189.2,43.8z" fill-rule="nonzero" fill="#ffe8cd"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="56.1" y="30.9">Cleaner next</tspan></text></g><g transform="translate(144.003300,914.630100)" id="shape108"><path stroke="#191919" stroke-width="1" d="M189.2,43.8L189.2,7.0C189.2,3.1,186.0,.0,182.2,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,43.8C.0,47.7,3.1,50.8,7.0,50.8L182.2,50.8C186.0,50.8,189.2,47.7,189.2,43.8z" fill-rule="nonzero" fill="#ffe8cd"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="56.1" y="30.9">Cleaner prev</tspan></text></g><g transform="translate(143.539300,985.524100)" id="shape109"><path stroke="#191919" stroke-width="1" d="M189.2,43.8L189.2,7.0C189.2,3.1,186.0,.0,182.2,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,43.8C.0,47.7,3.1,50.8,7.0,50.8L182.2,50.8C186.0,50.8,189.2,47.7,189.2,43.8z" fill-rule="nonzero" fill="#8ba7e1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="31.1" y="30.9">final Runnable thunk</tspan></text></g><g transform="translate(677.393000,681.060000)" id="shape110"><path stroke="#191919" stroke-width="1" d="M223.5,376.9L223.5,.0L.0,.0L.0,376.9L223.5,376.9z" fill-rule="nonzero" fill="#e9f4ed"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:15.00pt"><tspan style="font-size:12.00pt" x="82.7" y="21.0">Cleaner</tspan></text></g><g transform="translate(694.316300,794.000100)" id="shape111"><path stroke="#191919" stroke-width="1" d="M189.2,43.8L189.2,7.0C189.2,3.1,186.0,.0,182.2,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,43.8C.0,47.7,3.1,50.8,7.0,50.8L182.2,50.8C186.0,50.8,189.2,47.7,189.2,43.8z" fill-rule="nonzero" fill="#87cfa5"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="39.1" y="30.9">static Cleaner first</tspan></text></g><g transform="translate(694.779300,854.315100)" id="shape112"><path stroke="#191919" stroke-width="1" d="M189.2,43.8L189.2,7.0C189.2,3.1,186.0,.0,182.2,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,43.8C.0,47.7,3.1,50.8,7.0,50.8L182.2,50.8C186.0,50.8,189.2,47.7,189.2,43.8z" fill-rule="nonzero" fill="#ffe8cd"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="56.1" y="30.9">Cleaner next</tspan></text></g><g transform="translate(694.779300,914.630100)" id="shape113"><path stroke="#191919" stroke-width="1" d="M189.2,43.8L189.2,7.0C189.2,3.1,186.0,.0,182.2,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,43.8C.0,47.7,3.1,50.8,7.0,50.8L182.2,50.8C186.0,50.8,189.2,47.7,189.2,43.8z" fill-rule="nonzero" fill="#ffe8cd"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="56.1" y="30.9">Cleaner prev</tspan></text></g><g transform="translate(694.316300,985.524100)" id="shape114"><path stroke="#191919" stroke-width="1" d="M189.2,43.8L189.2,7.0C189.2,3.1,186.0,.0,182.2,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,43.8C.0,47.7,3.1,50.8,7.0,50.8L182.2,50.8C186.0,50.8,189.2,47.7,189.2,43.8z" fill-rule="nonzero" fill="#8ba7e1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="31.1" y="30.9">final Runnable thunk</tspan></text></g><g transform="translate(333.159000,879.711000)" id="shape115"><path stroke="#bc8c1a" stroke-width="3.3333299160003662" d="M.0,.0L43.0,.0L43.0,23.0L58.0,23.0" fill="none"/><path stroke="#bc8c1a" stroke-width="1" stroke-linecap="round" d="M58.0,17.5L69.0,23.0L58.0,28.5L58.0,17.5" fill="#bc8c1a"/></g><g transform="translate(608.547000,879.711000)" id="shape116"><path stroke="#bc8c1a" stroke-width="3.3333299160003662" d="M.0,.0L43.0,.0L43.0,23.0L58.0,23.0" fill="none"/><path stroke="#bc8c1a" stroke-width="1" stroke-linecap="round" d="M58.0,17.5L69.0,23.0L58.0,28.5L58.0,17.5" fill="#bc8c1a"/></g><g transform="translate(418.928000,819.396000)" id="shape117"><path stroke="#2e8d5d" stroke-width="3" d="M.0,.0L-41.0,.0L-41.0,-51.0L-58.6,-51.0" fill="none"/><path stroke="#2e8d5d" stroke-width="1" stroke-linecap="round" d="M-58.6,-45.8L-69.0,-51.0L-58.6,-56.2L-58.6,-45.8" fill="#2e8d5d"/></g><g transform="translate(419.392000,940.026000)" id="shape118"><path stroke="#bc8c1a" stroke-width="3.3333299160003662" d="M.0,.0L-43.0,.0L-43.0,16.0L-58.0,16.0" fill="none"/><path stroke="#bc8c1a" stroke-width="1" stroke-linecap="round" d="M-58.0,21.5L-69.0,16.0L-58.0,10.5L-58.0,21.5" fill="#bc8c1a"/></g><g transform="translate(694.779000,940.026000)" id="shape119"><path stroke="#bc8c1a" stroke-width="3.3333299160003662" d="M.0,.0L-43.0,.0L-43.0,16.0L-58.0,16.0" fill="none"/><path stroke="#bc8c1a" stroke-width="1" stroke-linecap="round" d="M-58.0,21.5L-69.0,16.0L-58.0,10.5L-58.0,21.5" fill="#bc8c1a"/></g><g transform="translate(401.561000,1132.890000)" id="shape120"><path stroke="#191919" stroke-width="1" stroke-dasharray="11,5" d="M.0,.0L-163.0,.0L-163.0,-89.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-166.0,-89.0L-163.0,-95.0L-160.0,-89.0L-166.0,-89.0" fill="#191919"/></g><g transform="translate(513.293000,1101.790000)" id="shape121"><path stroke="#191919" stroke-width="1" stroke-dasharray="11,5" d="M.0,.0L.0,-58.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-3.0,-58.0L.0,-64.0L3.0,-58.0L-3.0,-58.0" fill="#191919"/></g><g transform="translate(615.293000,1125.790000)" id="shape122"><path stroke="#191919" stroke-width="1" stroke-dasharray="11,5" d="M.0,.0L173.0,.0L173.0,-82.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M170.0,-82.0L173.0,-88.0L176.0,-82.0L170.0,-82.0" fill="#191919"/></g><g transform="translate(1975.000000,1134.000000)" id="table123"><g><path stroke="#a0a0a4" stroke-width="1" d="M.0,.0L135.6,.0L135.6,320.0L.0,320.0L.0,.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="9.0" y="165.5">Reference状态</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M135.6,.0L341.0,.0L341.0,40.0L135.6,40.0L135.6,.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="144.6" y="25.5">Active</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M341.0,.0L992.0,.0L992.0,40.0L341.0,40.0L341.0,.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"/></g><g><path stroke="#a0a0a4" stroke-width="1" d="M135.6,40.0L341.0,40.0L341.0,80.0L135.6,80.0L135.6,40.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="144.6" y="65.5">Pending</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M341.0,40.0L992.0,40.0L992.0,80.0L341.0,80.0L341.0,40.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"/></g><g><path stroke="#a0a0a4" stroke-width="1" d="M135.6,80.0L341.0,80.0L341.0,120.0L135.6,120.0L135.6,80.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="144.6" y="105.5">Inactive</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M341.0,80.0L992.0,80.0L992.0,120.0L341.0,120.0L341.0,80.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"/></g><g><path stroke="#a0a0a4" stroke-width="1" d="M135.6,120.0L341.0,120.0L341.0,160.0L135.6,160.0L135.6,120.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="144.6" y="145.5">Registered</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M341.0,120.0L992.0,120.0L992.0,160.0L341.0,160.0L341.0,120.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"/></g><g><path stroke="#a0a0a4" stroke-width="1" d="M135.6,160.0L341.0,160.0L341.0,200.0L135.6,200.0L135.6,160.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="144.6" y="185.5">Enqueued</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M341.0,160.0L992.0,160.0L992.0,200.0L341.0,200.0L341.0,160.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"/></g><g><path stroke="#a0a0a4" stroke-width="1" d="M135.6,200.0L341.0,200.0L341.0,240.0L135.6,240.0L135.6,200.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="144.6" y="225.5">Dequeued</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M341.0,200.0L992.0,200.0L992.0,240.0L341.0,240.0L341.0,200.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"/></g><g><path stroke="#a0a0a4" stroke-width="1" d="M135.6,240.0L341.0,240.0L341.0,280.0L135.6,280.0L135.6,240.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="144.6" y="265.5">Unregistered</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M341.0,240.0L992.0,240.0L992.0,280.0L341.0,280.0L341.0,240.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"/></g><g><path stroke="#a0a0a4" stroke-width="1" d="M135.6,280.0L341.0,280.0L341.0,320.0L135.6,320.0L135.6,280.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"/></g><g><path stroke="#a0a0a4" stroke-width="1" d="M341.0,280.0L992.0,280.0L992.0,320.0L341.0,320.0L341.0,280.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"/></g></g><g transform="translate(983.000000,520.875000)" id="shape124"><path stroke="#191919" stroke-width="1" d="M270.3,348.1L270.3,.0L.0,.0L.0,348.1L270.3,348.1z" fill-rule="nonzero" fill="#e9f4ed"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:15.00pt"><tspan style="font-size:12.00pt" x="106.1" y="21.0">Cleaner</tspan></text></g><g transform="translate(1031.130000,622.875000)" id="shape125"><path stroke="#191919" stroke-width="1" d="M204.0,41.0L204.0,7.0C204.0,3.1,200.9,.0,197.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L197.0,48.0C200.9,48.0,204.0,44.9,204.0,41.0z" fill-rule="nonzero" fill="#87cfa5"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="46.5" y="29.5">static Cleaner first</tspan></text></g><g transform="translate(1031.130000,684.938000)" id="shape126"><path stroke="#191919" stroke-width="1" d="M204.0,41.0L204.0,7.0C204.0,3.1,200.9,.0,197.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L197.0,48.0C200.9,48.0,204.0,44.9,204.0,41.0z" fill-rule="nonzero" fill="#ffe8cd"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="63.5" y="29.5">Cleaner next</tspan></text></g><g transform="translate(1031.130000,746.000000)" id="shape127"><path stroke="#191919" stroke-width="1" d="M204.0,41.0L204.0,7.0C204.0,3.1,200.9,.0,197.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L197.0,48.0C200.9,48.0,204.0,44.9,204.0,41.0z" fill-rule="nonzero" fill="#ffe8cd"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="63.5" y="29.5">Cleaner prev</tspan></text></g><g transform="translate(1030.760000,807.000000)" id="shape128"><path stroke="#191919" stroke-width="1" d="M204.0,41.0L204.0,7.0C204.0,3.1,200.9,.0,197.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L197.0,48.0C200.9,48.0,204.0,44.9,204.0,41.0z" fill-rule="nonzero" fill="#8ba7e1"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="38.5" y="29.5">final Runnable thunk</tspan></text></g><g transform="translate(983.000000,255.875000)" id="shape129"><path stroke="#191919" stroke-width="1" d="M270.3,264.8L270.3,.0L.0,.0L.0,264.8L270.3,264.8z" fill-rule="nonzero" fill="#e7f2fc"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:15.00pt"><tspan style="font-size:12.00pt" x="97.1" y="21.0">Reference</tspan></text></g><g transform="translate(1031.130000,296.625000)" id="shape130"><path stroke="#191919" stroke-width="1" d="M204.0,41.0L204.0,7.0C204.0,3.1,200.9,.0,197.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L197.0,48.0C200.9,48.0,204.0,44.9,204.0,41.0z" fill-rule="nonzero" fill="#fedad0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="72.0" y="29.5">T referent</tspan></text></g><g transform="translate(1031.130000,351.875000)" id="shape131"><path stroke="#191919" stroke-width="1" d="M204.0,41.0L204.0,7.0C204.0,3.1,200.9,.0,197.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L197.0,48.0C200.9,48.0,204.0,44.9,204.0,41.0z" fill-rule="nonzero" fill="#fda98d"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="13.5" y="20.0">ReferenceQueue&lt;? super T> </tspan><tspan style="font-size:10.00pt" x="83.0" y="39.0">queue</tspan></text></g><g transform="translate(1031.130000,463.625000)" id="shape132"><path stroke="#191919" stroke-width="1" d="M204.0,41.0L204.0,7.0C204.0,3.1,200.9,.0,197.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L197.0,48.0C200.9,48.0,204.0,44.9,204.0,41.0z" fill-rule="nonzero" fill="#7cc2f2"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="23.0" y="29.5">Reference&lt;T> discovered</tspan></text></g><g transform="translate(1031.130000,409.625000)" id="shape133"><path stroke="#191919" stroke-width="1" d="M204.0,41.0L204.0,7.0C204.0,3.1,200.9,.0,197.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L197.0,48.0C200.9,48.0,204.0,44.9,204.0,41.0z" fill-rule="nonzero" fill="#7cc2f2"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="56.0" y="29.5">Reference next</tspan></text></g><g transform="translate(1427.590000,614.750000)" id="shape134"><path stroke="#df7746" stroke-width="2.6666700839996338" stroke-dasharray="29.3334,13.3334,6.66668,13.3334" d="M.0,.0L.0,28.0L-142.0,28.0L-142.0,-294.1L-182.7,-294.1" fill="none"/><path stroke="#df7746" stroke-width="1" stroke-linecap="round" d="M-182.7,-289.2L-192.5,-294.1L-182.7,-299.0L-182.7,-289.2" fill="#df7746"/><rect width="22.0" height="19.0" x="-96.6" y="9.0" fill="#ffffff"/><rect width="102.0" height="19.0" x="-136.6" y="28.0" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-96.6" y="24.0">this</tspan><tspan style="font-size:10.00pt" x="-136.6" y="43.0">DirectByteBuffer</tspan></text></g><g transform="translate(1551.790000,614.750000)" id="shape135"><path stroke="#35609f" stroke-width="2.6666700839996338" stroke-dasharray="29.3334,13.3334,6.66668,13.3334" d="M.0,.0L.0,103.3L-288.0,103.3L-288.0,216.3L-307.2,216.3" fill="none"/><path stroke="#35609f" stroke-width="1" stroke-linecap="round" d="M-307.2,221.1L-317.0,216.3L-307.2,211.4L-307.2,221.1" fill="#35609f"/><rect width="78.0" height="19.0" x="-58.1" y="93.8" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt;font-weight:bold"><tspan style="font-size:10.00pt" x="-58.1" y="108.8">Deallocator</tspan></text></g><g transform="translate(1326.260000,868.000000)" id="shape136"><path stroke="#191919" stroke-width="1" d="M404.5,209.0L404.5,.0L.0,.0L.0,209.0L404.5,209.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:15.00pt"><tspan style="font-size:12.00pt" x="4.3" y="21.0">Deallocator implements Runnable</tspan></text></g><g transform="translate(1445.770000,938.000000)" id="shape137"><path stroke="#191919" stroke-width="1" d="M20.0,40.0L130.0,40.0L150.0,20.0L130.0,.0L20.0,.0L.0,20.0L20.0,40.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="60.5" y="25.5">run()</tspan></text></g><g transform="translate(1385.260000,1001.000000)" id="shape138"><path stroke="#191919" stroke-width="1" d="M270.0,53.0L270.0,7.0C270.0,3.1,266.9,.0,263.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,53.0C.0,56.9,3.1,60.0,7.0,60.0L263.0,60.0C266.9,60.0,270.0,56.9,270.0,53.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="46.0" y="26.0">unsafe.freeMemory(address);</tspan><tspan style="font-size:10.00pt" x="21.0" y="45.0">Bits.unreserveMemory(size, capacity);</tspan></text></g><g transform="translate(1132.760000,855.000000)" id="shape139"><path stroke="#191919" stroke-width="1" stroke-dasharray="11,5" d="M.0,.0L.0,103.0L307.0,103.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M307.0,100.0L313.0,103.0L307.0,106.0L307.0,100.0" fill="#191919"/></g><g transform="translate(1520.770000,978.000000)" id="shape140"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,18.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,18.0L.0,24.0L-3.0,18.0L3.0,18.0" fill="#191919"/></g><g transform="translate(1031.130000,544.750000)" id="shape141"><path stroke="#191919" stroke-width="1" d="M204.0,62.8L204.0,7.0C204.0,3.1,200.9,.0,197.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,62.8C.0,66.6,3.1,69.8,7.0,69.8L197.0,69.8C200.9,69.8,204.0,66.6,204.0,62.8z" fill-rule="nonzero" fill="#fda98d"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="32.5" y="21.4">static ReferenceQueue </tspan><tspan style="font-size:10.00pt" x="36.5" y="40.4">dummyQueue = new </tspan><tspan style="font-size:10.00pt" x="45.5" y="59.4">ReferenceQueue();</tspan></text></g><g transform="translate(1031.130000,579.625000)" id="shape142"><path stroke="#ba6239" stroke-width="4" d="M.0,.0L-29.1,.0L-29.1,-203.8L-12.0,-203.8" fill="none"/><path stroke="#ba6239" stroke-width="1" stroke-linecap="round" d="M-12.0,-209.8L.0,-203.8L-12.0,-197.8L-12.0,-209.8" fill="#ba6239"/></g><g transform="translate(332.695000,819.396000)" id="shape143"><path stroke="#2e8d5d" stroke-width="3" d="M.0,.0L27.0,.0L27.0,-36.6" fill="none"/><path stroke="#2e8d5d" stroke-width="1" stroke-linecap="round" d="M27.8,-31.4L17.4,-36.6L27.8,-41.8L27.8,-31.4" fill="#2e8d5d"/></g><g transform="translate(144.003400,719.226000)" id="shape144"><path stroke="#191919" stroke-width="1" d="M189.6,62.8L189.6,7.0C189.6,3.1,186.4,.0,182.6,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,62.8C.0,66.6,3.1,69.8,7.0,69.8L182.6,69.8C186.4,69.8,189.6,66.6,189.6,62.8z" fill-rule="nonzero" fill="#fda98d"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="25.3" y="21.4">static ReferenceQueue </tspan><tspan style="font-size:10.00pt" x="29.3" y="40.4">dummyQueue = new </tspan><tspan style="font-size:10.00pt" x="38.3" y="59.4">ReferenceQueue();</tspan></text></g><g transform="translate(418.502500,718.750000)" id="shape145"><path stroke="#191919" stroke-width="1" d="M189.6,62.8L189.6,7.0C189.6,3.1,186.4,.0,182.6,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,62.8C.0,66.6,3.1,69.8,7.0,69.8L182.6,69.8C186.4,69.8,189.6,66.6,189.6,62.8z" fill-rule="nonzero" fill="#fda98d"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="25.3" y="21.4">static ReferenceQueue </tspan><tspan style="font-size:10.00pt" x="29.3" y="40.4">dummyQueue = new </tspan><tspan style="font-size:10.00pt" x="38.3" y="59.4">ReferenceQueue();</tspan></text></g><g transform="translate(693.890500,719.226000)" id="shape146"><path stroke="#191919" stroke-width="1" d="M189.6,62.8L189.6,7.0C189.6,3.1,186.4,.0,182.6,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,62.8C.0,66.6,3.1,69.8,7.0,69.8L182.6,69.8C186.4,69.8,189.6,66.6,189.6,62.8z" fill-rule="nonzero" fill="#fda98d"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="25.3" y="21.4">static ReferenceQueue </tspan><tspan style="font-size:10.00pt" x="29.3" y="40.4">dummyQueue = new </tspan><tspan style="font-size:10.00pt" x="38.3" y="59.4">ReferenceQueue();</tspan></text></g><g transform="translate(126.617000,533.500000)" id="shape147"><path stroke="#191919" stroke-width="1" d="M223.5,147.5L223.5,.0L.0,.0L.0,147.5L223.5,147.5z" fill-rule="nonzero" fill="#e7f2fc"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:15.00pt"><tspan style="font-size:12.00pt" x="73.7" y="21.0">Reference</tspan></text></g><g transform="translate(150.535500,566.625000)" id="shape148"><path stroke="#191919" stroke-width="1" d="M183.0,41.0L183.0,7.0C183.0,3.1,179.9,.0,176.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L176.0,48.0C179.9,48.0,183.0,44.9,183.0,41.0z" fill-rule="nonzero" fill="#fedad0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="61.5" y="29.5">T referent</tspan></text></g><g transform="translate(144.003400,621.875000)" id="shape149"><path stroke="#191919" stroke-width="1" d="M189.6,41.0L189.6,7.0C189.6,3.1,186.4,.0,182.6,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L182.6,48.0C186.4,48.0,189.6,44.9,189.6,41.0z" fill-rule="nonzero" fill="#fda98d"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="22.8" y="29.5">ReferenceQueue queue</tspan></text></g><g transform="translate(401.561000,533.500000)" id="shape150"><path stroke="#191919" stroke-width="1" d="M223.5,147.5L223.5,.0L.0,.0L.0,147.5L223.5,147.5z" fill-rule="nonzero" fill="#e7f2fc"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:15.00pt"><tspan style="font-size:12.00pt" x="73.7" y="21.0">Reference</tspan></text></g><g transform="translate(426.617500,566.625000)" id="shape151"><path stroke="#191919" stroke-width="1" d="M183.0,41.0L183.0,7.0C183.0,3.1,179.9,.0,176.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L176.0,48.0C179.9,48.0,183.0,44.9,183.0,41.0z" fill-rule="nonzero" fill="#fedad0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="61.5" y="29.5">T referent</tspan></text></g><g transform="translate(420.085400,622.875000)" id="shape152"><path stroke="#191919" stroke-width="1" d="M189.6,41.0L189.6,7.0C189.6,3.1,186.4,.0,182.6,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L182.6,48.0C186.4,48.0,189.6,44.9,189.6,41.0z" fill-rule="nonzero" fill="#fda98d"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="22.8" y="29.5">ReferenceQueue queue</tspan></text></g><g transform="translate(676.950000,533.500000)" id="shape153"><path stroke="#191919" stroke-width="1" d="M223.5,147.5L223.5,.0L.0,.0L.0,147.5L223.5,147.5z" fill-rule="nonzero" fill="#e7f2fc"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:15.00pt"><tspan style="font-size:12.00pt" x="73.7" y="21.0">Reference</tspan></text></g><g transform="translate(697.156500,566.625000)" id="shape154"><path stroke="#191919" stroke-width="1" d="M183.0,41.0L183.0,7.0C183.0,3.1,179.9,.0,176.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L176.0,48.0C179.9,48.0,183.0,44.9,183.0,41.0z" fill-rule="nonzero" fill="#fedad0"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="61.5" y="29.5">T referent</tspan></text></g><g transform="translate(693.890400,622.875000)" id="shape155"><path stroke="#191919" stroke-width="1" d="M189.6,41.0L189.6,7.0C189.6,3.1,186.4,.0,182.6,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L182.6,48.0C186.4,48.0,189.6,44.9,189.6,41.0z" fill-rule="nonzero" fill="#fda98d"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="22.8" y="29.5">ReferenceQueue queue</tspan></text></g><g transform="translate(333.000000,754.000000)" id="shape156"><path stroke="#ba6239" stroke-width="4" d="M.0,.0L28.0,.0L28.0,-109.0L12.0,-109.0" fill="none"/><path stroke="#ba6239" stroke-width="1" stroke-linecap="round" d="M12.0,-103.0L.0,-109.0L12.0,-115.0L12.0,-103.0" fill="#ba6239"/></g><g transform="translate(609.000000,753.000000)" id="shape157"><path stroke="#ba6239" stroke-width="4" d="M.0,.0L28.0,.0L28.0,-107.0L12.0,-107.0" fill="none"/><path stroke="#ba6239" stroke-width="1" stroke-linecap="round" d="M12.0,-101.0L.0,-107.0L12.0,-113.0L12.0,-101.0" fill="#ba6239"/></g><g transform="translate(883.472000,754.101000)" id="shape158"><path stroke="#ba6239" stroke-width="4" d="M.0,.0L26.0,.0L26.0,-108.0L12.0,-108.0" fill="none"/><path stroke="#ba6239" stroke-width="1" stroke-linecap="round" d="M12.0,-102.0L.0,-108.0L12.0,-114.0L12.0,-102.0" fill="#ba6239"/></g><g transform="translate(1326.260000,1172.000000)" id="group159"><path stroke="#4c4c4c" stroke-width="1" d="M425.1,349.8L335.6,301.7L286.1,359.0L243.0,307.8L148.8,350.8L153.4,290.5L56.2,307.8L100.2,239.3L.0,209.7L82.0,182.0L21.3,138.1L121.5,115.3L101.4,53.7L194.1,79.0L211.1,.0L294.6,70.6L388.7,9.2L408.5,82.8L482.9,60.3L447.9,128.9L550.9,144.2L471.9,178.0L569.1,216.8L458.3,234.2L508.7,294.5L410.0,285.3L425.1,349.8z" fill-rule="nonzero" fill="#ffffff" id="shape160"/><g transform="translate(108.650000,105.705700)" id="shape161"><text xml:space="preserve" style="fill:#4c4c4c;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.2" y="25.8">gc过程中如果发现某个对象除了只有PhantomReference</tspan><tspan style="font-size:10.00pt" x="4.2" y="44.8">引用它之外，并没有其他的地方引用它了，那将会把这个</tspan><tspan style="font-size:10.00pt" x="4.2" y="63.8">引用放到java.lang.ref.Reference.pending队列里，</tspan><tspan style="font-size:10.00pt" x="4.2" y="82.8">在gc完毕的时候通知ReferenceHandler这个守护线程去执</tspan><tspan style="font-size:10.00pt" x="4.2" y="101.8">行一些后置处理，而DirectByteBuffer关联的</tspan><tspan style="font-size:10.00pt" x="4.2" y="120.8">PhantomReference是PhantomReference的一个子类，</tspan><tspan style="font-size:10.00pt" x="4.2" y="139.8">在最终的处理里会通过Unsafe的free接口来释放</tspan><tspan style="font-size:10.00pt" x="4.2" y="158.8">DirectByteBuffer对应的堆外内存块</tspan></text></g></g><g transform="translate(1021.028000,1452.784900)" id="shape162"><path stroke="#191919" stroke-width="1" d="M20.0,40.2L203.5,40.2L223.5,20.1L203.5,.0L20.0,.0L.0,20.1L20.0,40.2z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="91.7" y="25.6">clean()</tspan></text></g><g transform="translate(1031.130000,1332.000000)" id="shape163"><path stroke="#191919" stroke-width="1" d="M204.0,41.0L204.0,7.0C204.0,3.1,200.9,.0,197.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L197.0,48.0C200.9,48.0,204.0,44.9,204.0,41.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="64.0" y="29.5">remove(this)</tspan></text></g><g transform="translate(1132.760000,1452.790000)" id="shape164"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,-66.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-3.0,-66.0L.0,-72.0L3.0,-66.0L-3.0,-66.0" fill="#191919"/></g><g transform="translate(411.293000,1101.790000)" id="shape165"><path stroke="#191919" stroke-width="1" d="M204.0,41.0L204.0,7.0C204.0,3.1,200.9,.0,197.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,41.0C.0,44.9,3.1,48.0,7.0,48.0L197.0,48.0C200.9,48.0,204.0,44.9,204.0,41.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="68.0" y="29.5">thunk.run()</tspan></text></g><g transform="translate(1133.130000,1332.000000)" id="shape166"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,-155.0L-620.0,-155.0L-620.0,-177.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-623.0,-177.0L-620.0,-183.0L-617.0,-177.0L-623.0,-177.0" fill="#191919"/></g><g transform="translate(1133.130000,1332.000000)" id="shape167"><path stroke="#191919" stroke-width="1" stroke-dasharray="11,5" d="M.0,.0L1.0,.0L1.0,-374.0L306.6,-374.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M306.6,-377.0L312.6,-374.0L306.6,-371.0L306.6,-377.0" fill="#191919"/></g><g transform="translate(694.779000,1225.784900)" id="shape168"><path stroke="#191919" stroke-width="1" d="M20.0,40.2L203.5,40.2L223.5,20.1L203.5,.0L20.0,.0L.0,20.1L20.0,40.2z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="46.2" y="26.0">remove(Cleaner var0)</tspan></text></g><g transform="translate(1031.000000,1356.000000)" id="shape169"><path stroke="#191919" stroke-width="1" stroke-dasharray="11,5" d="M.0,.0L-86.0,.0L-86.0,-111.0L-106.0,-111.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-106.0,-108.0L-112.0,-111.0L-106.0,-114.0L-106.0,-108.0" fill="#191919"/></g><g transform="translate(85.000000,1186.460000)" id="shape170"><path stroke="#191919" stroke-width="1" d="M416.0,332.1L416.0,7.0C416.0,3.1,412.9,.0,409.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,332.1C.0,335.9,3.1,339.1,7.0,339.1L409.0,339.1C412.9,339.1,416.0,335.9,416.0,332.1z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.0" y="13.5">private static synchronized boolean remove(Cleaner var0) {</tspan><tspan style="font-size:10.00pt" x="4.0" y="32.5">        if (var0.next == var0) {</tspan><tspan style="font-size:10.00pt" x="4.0" y="51.5">            return false;</tspan><tspan style="font-size:10.00pt" x="4.0" y="70.5">        } else {</tspan><tspan style="font-size:10.00pt" x="4.0" y="89.5">            if (first == var0) {</tspan><tspan style="font-size:10.00pt" x="4.0" y="108.5">                if (var0.next != null) {  first = var0.next;</tspan><tspan style="font-size:10.00pt" x="4.0" y="127.5">                } else {   first = var0.prev;     }</tspan><tspan style="font-size:10.00pt" x="4.0" y="146.5">            }</tspan><tspan style="font-size:10.00pt" x="4.0" y="184.5">            if (var0.next != null) { var0.next.prev = var0.prev;   }</tspan><tspan style="font-size:10.00pt" x="4.0" y="222.5">            if (var0.prev != null) {   var0.prev.next = var0.next;     }</tspan><tspan style="font-size:10.00pt" x="4.0" y="260.5">            var0.next = var0;</tspan><tspan style="font-size:10.00pt" x="4.0" y="279.5">            var0.prev = var0;</tspan><tspan style="font-size:10.00pt" x="4.0" y="298.5">            return true;</tspan><tspan style="font-size:10.00pt" x="4.0" y="317.5">        }</tspan><tspan style="font-size:10.00pt" x="4.0" y="336.5">    }</tspan></text></g><g transform="translate(806.000000,1267.000000)" id="shape171"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,88.0L-299.0,88.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-299.0,91.0L-305.0,88.0L-299.0,85.0L-299.0,91.0" fill="#191919"/></g><g transform="translate(3736.000000,548.000000)" id="shape172"><path stroke="#191919" stroke-width="1" d="M122.5,60.5L245.0,30.3L122.5,.0L.0,30.3L122.5,60.5z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:Microsoft YaHei UI,PingFang SC,Mircrosoft YaHei,Arial;font-size:11.25pt"><tspan style="font-size:9.00pt" x="78.0" y="34.8">pending != null</tspan></text></g><g transform="translate(3858.500000,503.000000)" id="shape173"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,39.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,39.0L.0,45.0L-3.0,39.0L3.0,39.0" fill="#191919"/></g><g transform="translate(3609.000000,658.000000)" id="shape174"><path stroke="#191919" stroke-width="1" d="M22.0,44.0L78.0,44.0L78.0,44.0C90.2,44.0,100.0,34.2,100.0,22.0C100.0,9.8,90.2,.0,78.0,.0L22.0,.0L22.0,.0C9.8,.0,.0,9.8,.0,22.0C.0,34.2,9.8,44.0,22.0,44.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="15.0" y="27.5">return true;</tspan></text></g><g transform="translate(3736.000000,578.250000)" id="shape175"><path stroke="#191919" stroke-width="1" d="M.0,.0L-77.0,.0L-77.0,74.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-74.0,74.0L-77.0,80.0L-80.0,74.0L-74.0,74.0" fill="#191919"/></g><g transform="translate(4069.380000,636.000000)" id="shape176"><path stroke="#191919" stroke-width="1" d="M289.2,81.0L289.2,7.0C289.2,3.1,286.1,.0,282.2,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,81.0C.0,84.9,3.1,88.0,7.0,88.0L282.2,88.0C286.1,88.0,289.2,84.9,289.2,81.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.1" y="21.0">r = pending;</tspan><tspan style="font-size:10.00pt" x="4.1" y="40.0">c = r instanceof Cleaner ? (Cleaner) r : null;</tspan><tspan style="font-size:10.00pt" x="4.1" y="59.0">pending = r.discovered;</tspan><tspan style="font-size:10.00pt" x="4.1" y="78.0">r.discovered = null;</tspan></text></g><g transform="translate(3981.000000,578.250000)" id="shape177"><path stroke="#191919" stroke-width="1" d="M.0,.0L232.0,.0L232.0,52.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M235.0,52.0L232.0,58.0L229.0,52.0L235.0,52.0" fill="#191919"/></g><g transform="translate(4092.000000,759.125000)" id="shape178"><path stroke="#191919" stroke-width="1" d="M122.5,50.8L245.0,25.4L122.5,.0L.0,25.4L122.5,50.8z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:Microsoft YaHei UI,PingFang SC,Mircrosoft YaHei,Arial;font-size:11.25pt"><tspan style="font-size:9.00pt" x="99.0" y="29.9">c != null</tspan></text></g><g transform="translate(4214.000000,724.000000)" id="shape179"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,29.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,29.0L.0,35.0L-3.0,29.0L3.0,29.0" fill="#191919"/></g><g transform="translate(4092.000000,858.201000)" id="shape180"><path stroke="#191919" stroke-width="1" d="M245.0,42.0L245.0,7.0C245.0,3.1,241.9,.0,238.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,42.0C.0,45.9,3.1,49.0,7.0,49.0L238.0,49.0C241.9,49.0,245.0,45.9,245.0,42.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="96.0" y="30.0">c.clean();</tspan></text></g><g transform="translate(4214.500000,809.875000)" id="shape181"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,43.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,43.0L.0,49.0L-3.0,43.0L3.0,43.0" fill="#191919"/><rect width="25.0" height="19.0" x="-11.5" y="17.4" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-11.5" y="32.4">true</tspan></text></g><g transform="translate(3713.880000,759.125000)" id="shape182"><path stroke="#191919" stroke-width="1" d="M289.2,42.0L289.2,7.0C289.2,3.1,286.1,.0,282.2,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,42.0C.0,45.9,3.1,49.0,7.0,49.0L282.2,49.0C286.1,49.0,289.2,45.9,289.2,42.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="26.1" y="20.5">ReferenceQueue&lt;? super Object> q = </tspan><tspan style="font-size:10.00pt" x="120.1" y="39.5">r.queue;</tspan></text></g><g transform="translate(4092.000000,784.000000)" id="shape183"><path stroke="#191919" stroke-width="1" d="M.0,.0L-82.0,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-82.0,3.0L-88.0,.0L-82.0,-3.0L-82.0,3.0" fill="#191919"/></g><g transform="translate(3736.000000,848.701000)" id="shape184"><path stroke="#191919" stroke-width="1" d="M122.5,50.5L245.0,25.3L122.5,.0L.0,25.3L122.5,50.5z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:Microsoft YaHei UI,PingFang SC,Mircrosoft YaHei,Arial;font-size:11.25pt"><tspan style="font-size:9.00pt" x="110.0" y="21.3">q != </tspan><tspan style="font-size:9.00pt" x="57.5" y="38.3">ReferenceQueue.NULL</tspan></text></g><g transform="translate(3858.500000,808.125000)" id="shape185"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,34.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,34.0L.0,40.0L-3.0,34.0L3.0,34.0" fill="#191919"/></g><g transform="translate(3994.380000,945.000000)" id="shape186"><path stroke="#191919" stroke-width="1" d="M22.0,44.0L78.0,44.0L78.0,44.0C90.2,44.0,100.0,34.2,100.0,22.0C100.0,9.8,90.2,.0,78.0,.0L22.0,.0L22.0,.0C9.8,.0,.0,9.8,.0,22.0C.0,34.2,9.8,44.0,22.0,44.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="15.0" y="27.5">return true;</tspan></text></g><g transform="translate(3609.000000,944.999700)" id="shape187"><path stroke="#191919" stroke-width="1" d="M155.5,36.8L155.5,7.0C155.5,3.1,152.4,.0,148.5,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,36.8C.0,40.6,3.1,43.8,7.0,43.8L148.5,43.8C152.4,43.8,155.5,40.6,155.5,36.8z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="39.3" y="27.4">q.enqueue(r)</tspan></text></g><g transform="translate(3736.000000,873.951000)" id="shape188"><path stroke="#191919" stroke-width="1" d="M.0,.0L-48.0,.0L-48.0,66.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-45.0,66.0L-48.0,72.0L-51.0,66.0L-45.0,66.0" fill="#191919"/><rect width="25.0" height="19.0" x="-59.5" y="13.0" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-59.5" y="28.0">true</tspan></text></g><g transform="translate(3764.500000,966.888000)" id="shape189"><path stroke="#191919" stroke-width="1" d="M.0,.0L224.0,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M224.0,-3.0L230.0,.0L224.0,3.0L224.0,-3.0" fill="#191919"/></g><g transform="translate(3981.000000,873.951000)" id="shape190"><path stroke="#191919" stroke-width="1" d="M.0,.0L63.0,.0L63.0,66.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M66.0,66.0L63.0,72.0L60.0,66.0L66.0,66.0" fill="#191919"/><rect width="28.0" height="19.0" x="50.0" y="8.9" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="50.0" y="23.9">false</tspan></text></g><g transform="translate(4214.500000,907.201000)" id="shape191"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,60.0L-114.0,60.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-114.0,63.0L-120.0,60.0L-114.0,57.0L-114.0,63.0" fill="#191919"/></g><path stroke="#191919" stroke-width="1" d="M255.0,108.6L255.0,.0L.0,.0L.0,108.6L255.0,108.6z" fill-rule="nonzero" transform="translate(3175.000000,1063.356500)" fill="#ffffff" id="shape192"/><g transform="translate(3211.260000,1094.644100)" id="shape193"><path stroke="#191919" stroke-width="1" d="M180.7,42.4L180.7,7.0C180.7,3.1,177.6,.0,173.7,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,42.4C.0,46.3,3.1,49.4,7.0,49.4L173.7,49.4C177.6,49.4,180.7,46.3,180.7,42.4z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="52.9" y="30.2">GC 时设置值</tspan></text></g><g transform="translate(3211.260000,1119.350000)" id="shape194"><path stroke="#191919" stroke-width="1" d="M.0,.0L-28.0,.0L-28.0,-411.0L-6.0,-411.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-6.0,-414.0L.0,-411.0L-6.0,-408.0L-6.0,-414.0" fill="#191919"/></g><g transform="translate(3011.719000,1244.000000)" id="table195"><g><path stroke="#a0a0a4" stroke-width="1" d="M.0,.0L179.2,.0L179.2,40.0L.0,40.0L.0,.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="9.0" y="25.5">强可到达</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M179.2,.0L752.2,.0L752.2,40.0L179.2,40.0L179.2,.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="188.2" y="25.5">从GC Root搜索后，发现对象与GC Root之间存在强引用链则为强可到达。</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M752.2,.0L1325.3,.0L1325.3,40.0L752.2,40.0L752.2,.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"/></g><g><path stroke="#a0a0a4" stroke-width="1" d="M.0,40.0L179.2,40.0L179.2,90.0L.0,90.0L.0,40.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="9.0" y="70.5">软可到达</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M179.2,40.0L752.2,40.0L752.2,90.0L179.2,90.0L179.2,40.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="188.2" y="61.0">从GC Root搜索后，发现对象与GC Root之间不存在强引用链，但存在软引用链，则为软可到</tspan><tspan style="font-size:10.00pt" x="188.2" y="80.0">达。只被SoftReference 引用</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M752.2,40.0L1325.3,40.0L1325.3,90.0L752.2,90.0L752.2,40.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="761.2" y="61.0">在JVM应用即将发生内存溢出异常之前，将会把这些软引用关联的对象列进去回收对象范围之中</tspan><tspan style="font-size:10.00pt" x="761.2" y="80.0">进行第二次回收。如果这次回收之后还是没有足够的内存，才会抛出内存溢出异常</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M.0,90.0L179.2,90.0L179.2,140.0L.0,140.0L.0,90.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="9.0" y="120.5">弱可到达</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M179.2,90.0L752.2,90.0L752.2,140.0L179.2,140.0L179.2,90.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="188.2" y="111.0">从GC Root搜索后，发现对象与GC Root之间不存在强引用链与软引用链，但有弱引用链，则为</tspan><tspan style="font-size:10.00pt" x="188.2" y="130.0">弱可到达。只被WeakReference 引用</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M752.2,90.0L1325.3,90.0L1325.3,140.0L752.2,140.0L752.2,90.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="761.2" y="111.0">它的强度比软引用要更弱一些。被弱引用关联的对象只能生存到下一次垃圾收集发生之前，简言</tspan><tspan style="font-size:10.00pt" x="761.2" y="130.0">之就是：一旦发生GC必定回收被弱引用关联的对象，不管当前的内存是否足够</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M.0,140.0L179.2,140.0L179.2,208.0L.0,208.0L.0,140.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="9.0" y="179.5">虚可到达</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M179.2,140.0L752.2,140.0L752.2,208.0L179.2,208.0L179.2,140.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="188.2" y="170.0">从GC Root搜索后，发现对象与GC Root之间只存在虚引用链则为虚可到达。只被</tspan><tspan style="font-size:10.00pt" x="188.2" y="189.0">PhantomReference 引用。</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M752.2,140.0L1325.3,140.0L1325.3,208.0L752.2,208.0L752.2,140.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="761.2" y="160.5">一个对象是否关联到虚引用，完全不会影响该对象的生命周期，也无法通过虚引用来获取一个对</tspan><tspan style="font-size:10.00pt" x="761.2" y="179.5">象的实例(PhantomReference覆盖了Reference#get()并且总是返回null)。为对象设置一个虚引</tspan><tspan style="font-size:10.00pt" x="761.2" y="198.5">用的唯一目的是：能在此对象被垃圾收集器回收的时候收到一个系统通知</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M.0,208.0L179.2,208.0L179.2,248.0L.0,248.0L.0,208.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="9.0" y="233.5">不可达</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M179.2,208.0L752.2,208.0L752.2,248.0L179.2,248.0L179.2,208.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="188.2" y="233.5">从GC Root搜索后，找不到对象与GC Root之间的引用链，则为不可到达</tspan></text></g><g><path stroke="#a0a0a4" stroke-width="1" d="M752.2,208.0L1325.3,208.0L1325.3,248.0L752.2,248.0L752.2,208.0z" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"/></g></g><path stroke="#454545" stroke-width="3" stroke-linecap="round" d="M-9.4,8.5C11.4,-7.2,28.7,-27.1,59.2,-27.1" transform="translate(4606.79,402.10)" fill="none" id="shape196"/><path stroke="#454545" stroke-width="3" stroke-linecap="round" d="M-9.4,-8.5C11.4,7.2,28.7,27.1,59.2,27.1" transform="translate(4606.79,456.40)" fill="none" id="shape197"/><path stroke="#454545" stroke-width="1" stroke-linecap="round" d="M-12.5,10.1C-0.2,10.1,-0.4,-10.1,12.5,-10.1" transform="translate(4825.47,364.90)" fill="none" id="shape198"/><path stroke="#454545" stroke-width="1" stroke-linecap="round" d="M-12.5,-10.0C-0.2,-10.0,-0.4,10.1,12.5,10.1" transform="translate(4825.47,385.00)" fill="none" id="shape199"/><path stroke="#454545" stroke-width="1" stroke-linecap="round" d="M-12.5,10.1C-0.2,10.1,-0.4,-10.1,12.5,-10.1" transform="translate(4844.47,473.50)" fill="none" id="shape200"/><path stroke="#454545" stroke-width="1" stroke-linecap="round" d="M-12.5,-10.0C-0.2,-10.0,-0.4,10.1,12.5,10.1" transform="translate(4844.47,493.60)" fill="none" id="shape201"/><g transform="translate(4492.250250,395.250000)" id="shape202"><path stroke="#5a97fb" stroke-width="3" d="M34.0,.0L76.7,.0C95.5,.0,110.7,15.2,110.7,34.0C110.7,52.8,95.5,68.0,76.7,68.0L34.0,68.0C15.2,68.0,.0,52.8,.0,34.0C.0,15.2,15.2,.0,34.0,.0z" fill-rule="nonzero" fill="#5a97fb"/><text xml:space="preserve" style="fill:#ffffff;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:22.50pt;font-weight:bold"><tspan style="font-size:18.00pt" x="33.2" y="43.5">内存</tspan></text></g><g transform="translate(4665.970250,350.950000)" id="shape203"><path stroke="#454545" stroke-width="2" d="M4.0,.0L143.0,.0C145.2,.0,147.0,1.8,147.0,4.0L147.0,44.0C147.0,46.2,145.2,48.0,143.0,48.0L4.0,48.0C1.8,48.0,.0,46.2,.0,44.0L.0,4.0C.0,1.8,1.8,.0,4.0,.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:17.50pt;font-weight:bold"><tspan style="font-size:14.00pt" x="23.3" y="31.0">受GC管理的</tspan></text></g><g transform="translate(4665.970250,459.550000)" id="shape204"><path stroke="#454545" stroke-width="2" d="M4.0,.0L162.0,.0C164.2,.0,166.0,1.8,166.0,4.0L166.0,44.0C166.0,46.2,164.2,48.0,162.0,48.0L4.0,48.0C1.8,48.0,.0,46.2,.0,44.0L.0,4.0C.0,1.8,1.8,.0,4.0,.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:17.50pt;font-weight:bold"><tspan style="font-size:14.00pt" x="23.3" y="31.0">不受GC管理的</tspan></text></g><g transform="translate(4837.970250,323.350000)" id="shape205"><path d="M.0,.0L187.0,.0L187.0,31.5L.0,31.5L.0,.0z" fill-rule="nonzero" fill="#ffffff"/><path stroke="#454545" stroke-width="1" d="M.0,31.5L187.0,31.5" fill="none"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="12.5" y="21.3">Java普通对象(包含数组对象)</tspan></text></g><g transform="translate(4837.970250,363.550000)" id="shape206"><path d="M.0,.0L125.0,.0L125.0,31.5L.0,31.5L.0,.0z" fill-rule="nonzero" fill="#ffffff"/><path stroke="#454545" stroke-width="1" d="M.0,31.5L125.0,31.5" fill="none"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="12.5" y="21.3">DirectByteBuffer</tspan></text></g><g transform="translate(4856.970250,431.950000)" id="shape207"><path d="M.0,.0L122.0,.0L122.0,31.5L.0,31.5L.0,.0z" fill-rule="nonzero" fill="#ffffff"/><path stroke="#454545" stroke-width="1" d="M.0,31.5L122.0,31.5" fill="none"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="12.5" y="21.3">Unsafe申请 内存</tspan></text></g><g transform="translate(4856.970250,472.150000)" id="shape208"><path d="M.0,.0L179.0,.0L179.0,31.5L.0,31.5L.0,.0z" fill-rule="nonzero" fill="#ffffff"/><path stroke="#454545" stroke-width="1" d="M.0,31.5L179.0,31.5" fill="none"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="12.5" y="21.3">IO过程中申请的native内存</tspan></text></g><g transform="translate(4560.874016,37.795276)" id="shape209"><path stroke="#191919" stroke-width="1" d="M447.0,217.0L447.0,.0L.0,.0L.0,217.0L447.0,217.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.0" y="19.0">对HotSpot VM来说，不受GC管理的内存都是native memory；受GC管理</tspan><tspan style="font-size:10.00pt" x="4.0" y="38.0">的内存叫做GC heap或者managed heap。</tspan><tspan style="font-size:10.00pt" x="4.0" y="76.0">“Direct memory”，在Java的上下文里，特指Java程序通过一组特定的API</tspan><tspan style="font-size:10.00pt" x="4.0" y="95.0">访问native memory。这组API主要由DirectByteBuffer暴露出来。</tspan><tspan style="font-size:10.00pt" x="4.0" y="114.0">Native memory是一个通用概念，而direct memory只限定在特定的访问</tspan><tspan style="font-size:10.00pt" x="4.0" y="133.0">native memory的做法。两者不直接等价。</tspan><tspan style="font-size:10.00pt" x="4.0" y="171.0">另外JDK7中的HotSpot VM没有把String常量放到native memory，而是把</tspan><tspan style="font-size:10.00pt" x="4.0" y="190.0">* interned String => Java heap</tspan><tspan style="font-size:10.00pt" x="4.0" y="209.0">* Symbols => native memory</tspan></text></g><g transform="translate(5102.362205,18.897638)" id="shape210"><path stroke="#191919" stroke-width="1" d="M447.0,556.0L447.0,.0L.0,.0L.0,556.0L447.0,556.0z" fill-rule="nonzero" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.0" y="19.0">public static ByteBuffer allocateDirect(int capacity) {</tspan><tspan style="font-size:10.00pt" x="4.0" y="38.0">    return new DirectByteBuffer(capacity);</tspan><tspan style="font-size:10.00pt" x="4.0" y="57.0">}</tspan><tspan style="font-size:10.00pt" x="4.0" y="95.0">DirectByteBuffer(int cap) {                   // package-private</tspan><tspan style="font-size:10.00pt" x="4.0" y="133.0">    super(-1, 0, cap, cap);</tspan><tspan style="font-size:10.00pt" x="4.0" y="152.0">    boolean pa = VM.isDirectMemoryPageAligned();</tspan><tspan style="font-size:10.00pt" x="4.0" y="171.0">    int ps = Bits.pageSize();</tspan><tspan style="font-size:10.00pt" x="4.0" y="190.0">    long size = Math.max(1L, (long)cap + (pa ? ps : 0));</tspan><tspan style="font-size:10.00pt" x="4.0" y="209.0">    Bits.reserveMemory(size, cap);</tspan><tspan style="font-size:10.00pt" x="4.0" y="247.0">    long base = 0;</tspan><tspan style="font-size:10.00pt" x="4.0" y="266.0">    try {</tspan><tspan style="font-size:10.00pt" x="4.0" y="285.0">        base = unsafe.allocateMemory(size);</tspan><tspan style="font-size:10.00pt" x="4.0" y="304.0">    } catch (OutOfMemoryError x) {</tspan><tspan style="font-size:10.00pt" x="4.0" y="323.0">        Bits.unreserveMemory(size, cap);</tspan><tspan style="font-size:10.00pt" x="4.0" y="342.0">        throw x;</tspan><tspan style="font-size:10.00pt" x="4.0" y="361.0">    }</tspan><tspan style="font-size:10.00pt" x="4.0" y="380.0">    unsafe.setMemory(base, size, (byte) 0);</tspan><tspan style="font-size:10.00pt" x="4.0" y="399.0">    if (pa &amp;&amp; (base % ps != 0)) {</tspan><tspan style="font-size:10.00pt" x="4.0" y="418.0">        // Round up to page boundary</tspan><tspan style="font-size:10.00pt" x="4.0" y="437.0">        address = base + ps - (base &amp; (ps - 1));</tspan><tspan style="font-size:10.00pt" x="4.0" y="456.0">    } else {</tspan><tspan style="font-size:10.00pt" x="4.0" y="475.0">        address = base;</tspan><tspan style="font-size:10.00pt" x="4.0" y="494.0">    }</tspan><tspan style="font-size:10.00pt" x="4.0" y="513.0">    cleaner = Cleaner.create(this, new Deallocator(base, size, cap));</tspan><tspan style="font-size:10.00pt" x="4.0" y="532.0">    att = null;</tspan><tspan style="font-size:10.00pt" x="4.0" y="570.0">}</tspan></text></g><g transform="translate(4512.476378,636.000000)" id="shape211"><path stroke="#191919" stroke-width="1" d="M953.0,542.0L953.0,.0L.0,.0L.0,542.0L953.0,542.0z" fill-rule="nonzero" fill="#e9f4ed"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:22.50pt"><tspan style="font-size:18.00pt" x="4.0" y="29.0">GC线程</tspan></text></g><g transform="translate(4795.476378,680.125000)" id="shape212"><path stroke="#191919" stroke-width="1" d="M22.0,44.0L78.0,44.0L78.0,44.0C90.2,44.0,100.0,34.2,100.0,22.0C100.0,9.8,90.2,.0,78.0,.0L22.0,.0L22.0,.0C9.8,.0,.0,9.8,.0,22.0C.0,34.2,9.8,44.0,22.0,44.0z" fill-rule="nonzero" fill="#87cfa5"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="27.5" y="27.5">GC开始</tspan></text></g><g transform="translate(4795.476378,768.125000)" id="shape213"><path stroke="#191919" stroke-width="1" d="M100.0,53.0L100.0,7.0C100.0,3.1,96.9,.0,93.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,53.0C.0,56.9,3.1,60.0,7.0,60.0L93.0,60.0C96.9,60.0,100.0,56.9,100.0,53.0z" fill-rule="nonzero" fill="#87cfa5"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="4.0" y="35.5">遍历GC ROOTs</tspan></text></g><g transform="translate(4795.476378,876.750000)" id="shape214"><path stroke="#191919" stroke-width="1" d="M50.0,68.8L100.0,34.4L50.0,.0L.0,34.4L50.0,68.8z" fill-rule="nonzero" fill="#87cfa5"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="24.0" y="30.4">对象是否</tspan><tspan style="font-size:10.00pt" x="37.0" y="49.4">可达</tspan></text></g><g transform="translate(4845.476378,724.125000)" id="shape215"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,38.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,38.0L.0,44.0L-3.0,38.0L3.0,38.0" fill="#191919"/></g><g transform="translate(4845.476378,828.125000)" id="shape216"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,42.6" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,42.6L.0,48.6L-3.0,42.6L3.0,42.6" fill="#191919"/></g><g transform="translate(4613.476378,889.125000)" id="shape217"><path stroke="#191919" stroke-width="1" d="M22.0,44.0L78.0,44.0L78.0,44.0C90.2,44.0,100.0,34.2,100.0,22.0C100.0,9.8,90.2,.0,78.0,.0L22.0,.0L22.0,.0C9.8,.0,.0,9.8,.0,22.0C.0,34.2,9.8,44.0,22.0,44.0z" fill-rule="nonzero" fill="#87cfa5"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="30.5" y="27.5">不回收</tspan></text></g><g transform="translate(4795.476378,911.125000)" id="shape218"><path stroke="#191919" stroke-width="1" d="M.0,.0L-76.0,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-76.0,3.0L-82.0,.0L-76.0,-3.0L-76.0,3.0" fill="#191919"/><rect width="26.0" height="19.0" x="-52.7" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-52.7" y="5.5">可达</tspan></text></g><g transform="translate(4997.476378,876.750000)" id="shape219"><path stroke="#191919" stroke-width="1" d="M50.0,68.8L100.0,34.4L50.0,.0L.0,34.4L50.0,68.8z" fill-rule="nonzero" fill="#87cfa5"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="24.0" y="30.4">是否强引</tspan><tspan style="font-size:10.00pt" x="43.5" y="49.4">用</tspan></text></g><g transform="translate(4895.476378,911.125000)" id="shape220"><path stroke="#191919" stroke-width="1" d="M.0,.0L96.0,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M96.0,-3.0L102.0,.0L96.0,3.0L96.0,-3.0" fill="#191919"/><rect width="39.0" height="19.0" x="25.8" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="25.8" y="5.5">不可达</tspan></text></g><g transform="translate(5161.476378,889.125000)" id="shape221"><path stroke="#191919" stroke-width="1" d="M22.0,44.0L78.0,44.0L78.0,44.0C90.2,44.0,100.0,34.2,100.0,22.0C100.0,9.8,90.2,.0,78.0,.0L22.0,.0L22.0,.0C9.8,.0,.0,9.8,.0,22.0C.0,34.2,9.8,44.0,22.0,44.0z" fill-rule="nonzero" fill="#87cfa5"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="24.0" y="27.5">对象回收</tspan></text></g><g transform="translate(5097.476378,911.125000)" id="shape222"><path stroke="#191919" stroke-width="1" d="M.0,.0L58.0,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M58.0,-3.0L64.0,.0L58.0,3.0L58.0,-3.0" fill="#191919"/><rect width="13.0" height="19.0" x="24.1" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="24.1" y="5.5">是</tspan></text></g><g transform="translate(4971.976378,1002.125000)" id="shape223"><path stroke="#191919" stroke-width="1" d="M75.5,68.8L151.0,34.4L75.5,.0L.0,34.4L75.5,68.8z" fill-rule="nonzero" fill="#87cfa5"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="56.0" y="30.4">是否被</tspan><tspan style="font-size:10.00pt" x="32.0" y="49.4">Reference引用</tspan></text></g><g transform="translate(5047.476378,945.500000)" id="shape224"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,50.6" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,50.6L.0,56.6L-3.0,50.6L3.0,50.6" fill="#191919"/></g><g transform="translate(5122.976378,1036.500000)" id="shape225"><path stroke="#191919" stroke-width="1" d="M.0,.0L88.5,.0L88.5,-97.4" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M85.5,-97.4L88.5,-103.4L91.5,-97.4L85.5,-97.4" fill="#191919"/><rect width="13.0" height="19.0" x="83.0" y="-60.2" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="83.0" y="-45.2">否</tspan></text></g><g transform="translate(4971.976378,1036.500000)" id="shape226"><path stroke="#191919" stroke-width="1" d="M.0,.0L-55.3,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-55.3,3.0L-61.3,.0L-55.3,-3.0L-55.3,3.0" fill="#191919"/><rect width="13.0" height="19.0" x="-35.1" y="-9.5" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-35.1" y="5.5">是</tspan></text></g><g transform="translate(4512.476378,1247.500000)" id="shape227"><path stroke="#191919" stroke-width="1" d="M953.0,144.0L953.0,.0L.0,.0L.0,144.0L953.0,144.0z" fill-rule="nonzero" fill="#fff4e8"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:22.50pt"><tspan style="font-size:18.00pt" x="4.0" y="29.0">JVM堆</tspan></text></g><g transform="translate(4737.976378,1289.500000)" id="shape228"><path d="M7.5,.0L156.5,.0L156.5,.0C160.6,.0,164.0,13.4,164.0,30.0C164.0,46.6,160.6,60.0,156.5,60.0L7.5,60.0L7.5,60.0C3.4,60.0,.0,46.6,.0,30.0C.0,13.4,3.4,.0,7.5,.0z" fill-rule="nonzero" fill="#ffce80"/><path stroke="#191919" stroke-width="1" d="M7.5,.0L156.5,.0L156.5,.0C160.6,.0,164.0,13.4,164.0,30.0C164.0,46.6,160.6,60.0,156.5,60.0L7.5,60.0L7.5,60.0C3.4,60.0,.0,46.6,.0,30.0C.0,13.4,3.4,.0,7.5,.0zM156.5,.0C152.4,.0,149.0,13.4,149.0,30.0C149.0,46.6,152.4,60.0,156.5,60.0" fill="none"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="14.8" y="26.0">Reference#pendding</tspan><tspan style="font-size:10.00pt" x="52.3" y="45.0">静态属性</tspan></text></g><g transform="translate(4819.976378,1070.875000)" id="shape229"><path stroke="#191919" stroke-width="1" stroke-dasharray="11,5" d="M.0,.0L.0,212.6" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,212.6L.0,218.6L-3.0,212.6L3.0,212.6" fill="#191919"/></g><g transform="translate(4512.476378,1480.000000)" id="shape230"><path stroke="#191919" stroke-width="1" d="M953.0,491.0L953.0,.0L.0,.0L.0,491.0L953.0,491.0z" fill-rule="nonzero" fill="#e7f2fc"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:22.50pt"><tspan style="font-size:18.00pt" x="4.0" y="29.0">ReferenceHandler 线程</tspan></text></g><g transform="translate(4609.726378,1601.000000)" id="shape231"><path stroke="#191919" stroke-width="1" d="M.0,60.0L100.0,60.0L100.0,15.0L85.0,.0L15.0,.0L.0,15.0L.0,60.0z" fill-rule="nonzero" fill="#00aeee"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="14.0" y="35.5">while (true) </tspan></text></g><g transform="translate(4720.726378,1002.125000)" id="shape232"><path stroke="#191919" stroke-width="1" d="M8.6,.0L198.5,.0L198.5,.0C193.0,10.2,189.9,21.9,189.9,34.4C189.9,46.8,193.0,58.5,198.5,68.7L8.6,68.8L8.6,68.7C3.1,58.5,.0,46.8,.0,34.4C.0,21.9,3.1,10.2,8.6,.0z" fill-rule="nonzero" fill="#87cfa5"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="53.8" y="30.4">将对象引用放到</tspan><tspan style="font-size:10.00pt" x="16.3" y="49.4">Reference#pendding链表上</tspan></text></g><g transform="translate(4857.476378,1601.000000)" id="shape233"><path stroke="#191919" stroke-width="1" d="M20.0,60.0L80.0,60.0L100.0,.0L.0,.0L20.0,60.0z" fill-rule="nonzero" fill="#00aeee"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="37.0" y="35.5">加锁</tspan></text></g><g transform="translate(4709.726378,1631.000000)" id="shape234"><path stroke="#191919" stroke-width="1" d="M.0,.0L151.8,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M151.8,-3.0L157.8,.0L151.8,3.0L151.8,-3.0" fill="#191919"/></g><g transform="translate(5005.976378,1597.005000)" id="shape235"><path stroke="#191919" stroke-width="1" d="M58.0,68.8L116.0,34.4L58.0,.0L.0,34.4L58.0,68.8z" fill-rule="nonzero" fill="#00aeee"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="29.0" y="30.4">pendding</tspan><tspan style="font-size:10.00pt" x="38.5" y="49.4">不为空</tspan></text></g><g transform="translate(4947.476378,1631.000000)" id="shape236"><path stroke="#191919" stroke-width="1" d="M.0,.0L52.5,.3" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M52.5,-2.7L58.5,.4L52.5,3.3L52.5,-2.7" fill="#191919"/></g><g transform="translate(4901.976378,1319.500000)" id="shape237"><path stroke="#191919" stroke-width="1" stroke-dasharray="11,5" d="M.0,.0L162.0,.0L162.0,271.5" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M165.0,271.5L162.0,277.5L159.0,271.5L165.0,271.5" fill="#191919"/></g><g transform="translate(5199.476378,1602.000000)" id="shape238"><path stroke="#191919" stroke-width="1" d="M215.5,60.0L215.5,.0L.0,.0L.0,60.0L215.5,60.0z" fill-rule="nonzero" fill="#00aeee"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="51.3" y="26.0">取出Reference对象</tspan><tspan style="font-size:10.00pt" x="8.3" y="45.0">Reference&lt;Object> r = pending</tspan></text></g><g transform="translate(5121.976378,1631.380000)" id="shape239"><path stroke="#191919" stroke-width="1" d="M.0,.0L71.5,.6" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M71.5,-2.4L77.5,.6L71.5,3.6L71.5,-2.4" fill="#191919"/><rect width="25.0" height="19.0" x="24.1" y="-9.2" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="24.1" y="5.8">true</tspan></text></g><g transform="translate(5199.476378,1726.500000)" id="shape240"><path stroke="#191919" stroke-width="1" d="M215.5,70.0L215.5,.0L.0,.0L.0,70.0L215.5,70.0z" fill-rule="nonzero" fill="#00aeee"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="28.3" y="21.5">将Reference转换为Cleaner</tspan><tspan style="font-size:10.00pt" x="26.8" y="40.5"> c = r instanceof Cleaner ? </tspan><tspan style="font-size:10.00pt" x="58.3" y="59.5">(Cleaner) r : null;</tspan></text></g><g transform="translate(5199.476378,1861.000000)" id="shape241"><path stroke="#191919" stroke-width="1" d="M215.5,70.0L215.5,.0L.0,.0L.0,70.0L215.5,70.0z" fill-rule="nonzero" fill="#00aeee"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="7.3" y="21.5">将pendding链表上下一个对象置为</tspan><tspan style="font-size:10.00pt" x="88.3" y="40.5">链表头</tspan><tspan style="font-size:10.00pt" x="36.8" y="59.5">pending = r.discovered</tspan></text></g><g transform="translate(5013.976378,1866.000000)" id="shape242"><path stroke="#191919" stroke-width="1" d="M20.0,60.0L80.0,60.0L100.0,.0L.0,.0L20.0,60.0z" fill-rule="nonzero" fill="#00aeee"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="30.5" y="35.5">释放锁</tspan></text></g><g transform="translate(5307.226378,1662.000000)" id="shape243"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,58.5" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,58.5L.0,64.5L-3.0,58.5L3.0,58.5" fill="#191919"/></g><g transform="translate(5307.226378,1796.500000)" id="shape244"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,58.5" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M3.0,58.5L.0,64.5L-3.0,58.5L3.0,58.5" fill="#191919"/></g><g transform="translate(5199.476378,1896.000000)" id="shape245"><path stroke="#191919" stroke-width="1" d="M.0,.0L-89.5,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-89.5,3.0L-95.5,.0L-89.5,-3.0L-89.5,3.0" fill="#191919"/></g><g transform="translate(4849.476378,1861.625000)" id="shape246"><path stroke="#191919" stroke-width="1" d="M58.0,68.8L116.0,34.4L58.0,.0L.0,34.4L58.0,68.8z" fill-rule="nonzero" fill="#00aeee"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="36.0" y="30.4">cleaner</tspan><tspan style="font-size:10.00pt" x="38.5" y="49.4">不为空</tspan></text></g><g transform="translate(5023.976378,1896.000000)" id="shape247"><path stroke="#191919" stroke-width="1" d="M.0,.0L-52.5,.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-52.5,3.0L-58.5,.0L-52.5,-3.0L-52.5,3.0" fill="#191919"/></g><g transform="translate(4857.476378,1738.000000)" id="shape248"><path stroke="#191919" stroke-width="1" d="M100.0,40.0L100.0,7.0C100.0,3.1,96.9,.0,93.0,.0L7.0,.0C3.1,.0,.0,3.1,.0,7.0L.0,40.0C.0,43.9,3.1,47.0,7.0,47.0L93.0,47.0C96.9,47.0,100.0,43.9,100.0,40.0z" fill-rule="nonzero" fill="#00aeee"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="8.0" y="29.0">执行clean逻辑</tspan></text></g><g transform="translate(4907.476378,1861.625000)" id="shape249"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,-70.6" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-3.0,-70.6L.0,-76.6L3.0,-70.6L-3.0,-70.6" fill="#191919"/><rect width="25.0" height="19.0" x="-11.5" y="-45.7" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-11.5" y="-30.7">true</tspan></text></g><g transform="translate(4552.976378,1866.000000)" id="shape250"><path stroke="#191919" stroke-width="1" d="M213.5,65.0L213.5,.0L.0,.0L.0,65.0L213.5,65.0z" fill-rule="nonzero" fill="#00aeee"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="31.3" y="19.0">将r放入Reference#queue</tspan><tspan style="font-size:10.00pt" x="9.8" y="38.0">if (q != ReferenceQueue.NULL) </tspan><tspan style="font-size:10.00pt" x="68.3" y="57.0">q.enqueue(r)</tspan></text></g><g transform="translate(4857.476378,1761.500000)" id="shape251"><path stroke="#191919" stroke-width="1" d="M.0,.0L-128.4,.0L-128.4,98.5" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-125.4,98.5L-128.4,104.5L-131.4,98.5L-125.4,98.5" fill="#191919"/></g><g transform="translate(4659.726378,1866.000000)" id="shape252"><path stroke="#191919" stroke-width="1" d="M.0,.0L.0,-199.0" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-3.0,-199.0L.0,-205.0L3.0,-199.0L-3.0,-199.0" fill="#191919"/></g><g transform="translate(4852.492378,1897.787500)" id="shape253"><path stroke="#191919" stroke-width="1" d="M.0,.0L-80.0,.7" fill="none"/><path stroke="#191919" stroke-width="1" stroke-linecap="round" d="M-80.0,3.7L-86.0,.7L-80.0,-2.3L-80.0,3.7" fill="#191919"/><rect width="28.0" height="19.0" x="-50.2" y="-9.2" fill="#ffffff"/><text xml:space="preserve" style="fill:#191919;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="-50.2" y="5.8">false</tspan></text></g><g transform="translate(5213.376378,1002.125000)" id="group254"><path stroke="#4c4c4c" stroke-width="1" d="M21.5,76.0C21.5,50.6,39.8,28.6,67.0,16.8L77.8,.0L84.7,11.0C93.2,9.0,102.2,7.9,111.5,7.9C121.7,7.9,131.5,9.2,140.6,11.5L148.0,.0L159.7,18.5C184.9,30.5,201.6,51.8,201.6,76.0C201.6,113.5,161.3,144.0,111.5,144.0C107.1,144.0,102.7,143.8,98.5,143.3C77.5,143.8,.0,120.4,.0,120.4L36.3,114.1C36.3,114.1,36.6,114.2,37.2,114.4C27.3,103.4,21.5,90.2,21.5,76.0z" fill-rule="nonzero" fill="#eb8989" id="shape255"/><g transform="translate(38.400000,36.799900)" id="shape256"><text xml:space="preserve" style="fill:#4c4c4c;font-family:微软雅黑,PingFang SC,Mircrosoft YaHei,Arial;font-size:12.50pt"><tspan style="font-size:10.00pt" x="8.2" y="9.1">不同的Reference子类</tspan><tspan style="font-size:10.00pt" x="6.2" y="28.1">有不同的触发时机，也</tspan><tspan style="font-size:10.00pt" x="6.2" y="47.1">就是说子类只是控制什</tspan><tspan style="font-size:10.00pt" x="9.7" y="66.1">么时候进行GC，但是</tspan><tspan style="font-size:10.00pt" x="16.2" y="85.1">不控制具体GC逻辑</tspan></text></g></g></g></svg>